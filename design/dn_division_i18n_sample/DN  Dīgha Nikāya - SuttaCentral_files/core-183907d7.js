(function(){var root=this;var previousUnderscore=root._;var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var
push=ArrayProto.push,slice=ArrayProto.slice,concat=ArrayProto.concat,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var
nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind;var _=function(obj){if(obj instanceof _)return obj;if(!(this instanceof _))return new _(obj);this._wrapped=obj;};if(typeof exports!=='undefined'){if(typeof module!=='undefined'&&module.exports){exports=module.exports=_;}
exports._=_;}else{root._=_;}
_.VERSION='1.7.0';var createCallback=function(func,context,argCount){if(context===void 0)return func;switch(argCount==null?3:argCount){case 1:return function(value){return func.call(context,value);};case 2:return function(value,other){return func.call(context,value,other);};case 3:return function(value,index,collection){return func.call(context,value,index,collection);};case 4:return function(accumulator,value,index,collection){return func.call(context,accumulator,value,index,collection);};}
return function(){return func.apply(context,arguments);};};_.iteratee=function(value,context,argCount){if(value==null)return _.identity;if(_.isFunction(value))return createCallback(value,context,argCount);if(_.isObject(value))return _.matches(value);return _.property(value);};_.each=_.forEach=function(obj,iteratee,context){if(obj==null)return obj;iteratee=createCallback(iteratee,context);var i,length=obj.length;if(length===+length){for(i=0;i<length;i++){iteratee(obj[i],i,obj);}}else{var keys=_.keys(obj);for(i=0,length=keys.length;i<length;i++){iteratee(obj[keys[i]],keys[i],obj);}}
return obj;};_.map=_.collect=function(obj,iteratee,context){if(obj==null)return[];iteratee=_.iteratee(iteratee,context);var keys=obj.length!==+obj.length&&_.keys(obj),length=(keys||obj).length,results=Array(length),currentKey;for(var index=0;index<length;index++){currentKey=keys?keys[index]:index;results[index]=iteratee(obj[currentKey],currentKey,obj);}
return results;};var reduceError='Reduce of empty array with no initial value';_.reduce=_.foldl=_.inject=function(obj,iteratee,memo,context){if(obj==null)obj=[];iteratee=createCallback(iteratee,context,4);var keys=obj.length!==+obj.length&&_.keys(obj),length=(keys||obj).length,index=0,currentKey;if(arguments.length<3){if(!length)throw new TypeError(reduceError);memo=obj[keys?keys[index++]:index++];}
for(;index<length;index++){currentKey=keys?keys[index]:index;memo=iteratee(memo,obj[currentKey],currentKey,obj);}
return memo;};_.reduceRight=_.foldr=function(obj,iteratee,memo,context){if(obj==null)obj=[];iteratee=createCallback(iteratee,context,4);var keys=obj.length!==+obj.length&&_.keys(obj),index=(keys||obj).length,currentKey;if(arguments.length<3){if(!index)throw new TypeError(reduceError);memo=obj[keys?keys[--index]:--index];}
while(index--){currentKey=keys?keys[index]:index;memo=iteratee(memo,obj[currentKey],currentKey,obj);}
return memo;};_.find=_.detect=function(obj,predicate,context){var result;predicate=_.iteratee(predicate,context);_.some(obj,function(value,index,list){if(predicate(value,index,list)){result=value;return true;}});return result;};_.filter=_.select=function(obj,predicate,context){var results=[];if(obj==null)return results;predicate=_.iteratee(predicate,context);_.each(obj,function(value,index,list){if(predicate(value,index,list))results.push(value);});return results;};_.reject=function(obj,predicate,context){return _.filter(obj,_.negate(_.iteratee(predicate)),context);};_.every=_.all=function(obj,predicate,context){if(obj==null)return true;predicate=_.iteratee(predicate,context);var keys=obj.length!==+obj.length&&_.keys(obj),length=(keys||obj).length,index,currentKey;for(index=0;index<length;index++){currentKey=keys?keys[index]:index;if(!predicate(obj[currentKey],currentKey,obj))return false;}
return true;};_.some=_.any=function(obj,predicate,context){if(obj==null)return false;predicate=_.iteratee(predicate,context);var keys=obj.length!==+obj.length&&_.keys(obj),length=(keys||obj).length,index,currentKey;for(index=0;index<length;index++){currentKey=keys?keys[index]:index;if(predicate(obj[currentKey],currentKey,obj))return true;}
return false;};_.contains=_.include=function(obj,target){if(obj==null)return false;if(obj.length!==+obj.length)obj=_.values(obj);return _.indexOf(obj,target)>=0;};_.invoke=function(obj,method){var args=slice.call(arguments,2);var isFunc=_.isFunction(method);return _.map(obj,function(value){return(isFunc?method:value[method]).apply(value,args);});};_.pluck=function(obj,key){return _.map(obj,_.property(key));};_.where=function(obj,attrs){return _.filter(obj,_.matches(attrs));};_.findWhere=function(obj,attrs){return _.find(obj,_.matches(attrs));};_.max=function(obj,iteratee,context){var result=-Infinity,lastComputed=-Infinity,value,computed;if(iteratee==null&&obj!=null){obj=obj.length===+obj.length?obj:_.values(obj);for(var i=0,length=obj.length;i<length;i++){value=obj[i];if(value>result){result=value;}}}else{iteratee=_.iteratee(iteratee,context);_.each(obj,function(value,index,list){computed=iteratee(value,index,list);if(computed>lastComputed||computed===-Infinity&&result===-Infinity){result=value;lastComputed=computed;}});}
return result;};_.min=function(obj,iteratee,context){var result=Infinity,lastComputed=Infinity,value,computed;if(iteratee==null&&obj!=null){obj=obj.length===+obj.length?obj:_.values(obj);for(var i=0,length=obj.length;i<length;i++){value=obj[i];if(value<result){result=value;}}}else{iteratee=_.iteratee(iteratee,context);_.each(obj,function(value,index,list){computed=iteratee(value,index,list);if(computed<lastComputed||computed===Infinity&&result===Infinity){result=value;lastComputed=computed;}});}
return result;};_.shuffle=function(obj){var set=obj&&obj.length===+obj.length?obj:_.values(obj);var length=set.length;var shuffled=Array(length);for(var index=0,rand;index<length;index++){rand=_.random(0,index);if(rand!==index)shuffled[index]=shuffled[rand];shuffled[rand]=set[index];}
return shuffled;};_.sample=function(obj,n,guard){if(n==null||guard){if(obj.length!==+obj.length)obj=_.values(obj);return obj[_.random(obj.length-1)];}
return _.shuffle(obj).slice(0,Math.max(0,n));};_.sortBy=function(obj,iteratee,context){iteratee=_.iteratee(iteratee,context);return _.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iteratee(value,index,list)};}).sort(function(left,right){var a=left.criteria;var b=right.criteria;if(a!==b){if(a>b||a===void 0)return 1;if(a<b||b===void 0)return-1;}
return left.index-right.index;}),'value');};var group=function(behavior){return function(obj,iteratee,context){var result={};iteratee=_.iteratee(iteratee,context);_.each(obj,function(value,index){var key=iteratee(value,index,obj);behavior(result,value,key);});return result;};};_.groupBy=group(function(result,value,key){if(_.has(result,key))result[key].push(value);else result[key]=[value];});_.indexBy=group(function(result,value,key){result[key]=value;});_.countBy=group(function(result,value,key){if(_.has(result,key))result[key]++;else result[key]=1;});_.sortedIndex=function(array,obj,iteratee,context){iteratee=_.iteratee(iteratee,context,1);var value=iteratee(obj);var low=0,high=array.length;while(low<high){var mid=low+high>>>1;if(iteratee(array[mid])<value)low=mid+1;else high=mid;}
return low;};_.toArray=function(obj){if(!obj)return[];if(_.isArray(obj))return slice.call(obj);if(obj.length===+obj.length)return _.map(obj,_.identity);return _.values(obj);};_.size=function(obj){if(obj==null)return 0;return obj.length===+obj.length?obj.length:_.keys(obj).length;};_.partition=function(obj,predicate,context){predicate=_.iteratee(predicate,context);var pass=[],fail=[];_.each(obj,function(value,key,obj){(predicate(value,key,obj)?pass:fail).push(value);});return[pass,fail];};_.first=_.head=_.take=function(array,n,guard){if(array==null)return void 0;if(n==null||guard)return array[0];if(n<0)return[];return slice.call(array,0,n);};_.initial=function(array,n,guard){return slice.call(array,0,Math.max(0,array.length-(n==null||guard?1:n)));};_.last=function(array,n,guard){if(array==null)return void 0;if(n==null||guard)return array[array.length-1];return slice.call(array,Math.max(array.length-n,0));};_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,n==null||guard?1:n);};_.compact=function(array){return _.filter(array,_.identity);};var flatten=function(input,shallow,strict,output){if(shallow&&_.every(input,_.isArray)){return concat.apply(output,input);}
for(var i=0,length=input.length;i<length;i++){var value=input[i];if(!_.isArray(value)&&!_.isArguments(value)){if(!strict)output.push(value);}else if(shallow){push.apply(output,value);}else{flatten(value,shallow,strict,output);}}
return output;};_.flatten=function(array,shallow){return flatten(array,shallow,false,[]);};_.without=function(array){return _.difference(array,slice.call(arguments,1));};_.uniq=_.unique=function(array,isSorted,iteratee,context){if(array==null)return[];if(!_.isBoolean(isSorted)){context=iteratee;iteratee=isSorted;isSorted=false;}
if(iteratee!=null)iteratee=_.iteratee(iteratee,context);var result=[];var seen=[];for(var i=0,length=array.length;i<length;i++){var value=array[i];if(isSorted){if(!i||seen!==value)result.push(value);seen=value;}else if(iteratee){var computed=iteratee(value,i,array);if(_.indexOf(seen,computed)<0){seen.push(computed);result.push(value);}}else if(_.indexOf(result,value)<0){result.push(value);}}
return result;};_.union=function(){return _.uniq(flatten(arguments,true,true,[]));};_.intersection=function(array){if(array==null)return[];var result=[];var argsLength=arguments.length;for(var i=0,length=array.length;i<length;i++){var item=array[i];if(_.contains(result,item))continue;for(var j=1;j<argsLength;j++){if(!_.contains(arguments[j],item))break;}
if(j===argsLength)result.push(item);}
return result;};_.difference=function(array){var rest=flatten(slice.call(arguments,1),true,true,[]);return _.filter(array,function(value){return!_.contains(rest,value);});};_.zip=function(array){if(array==null)return[];var length=_.max(arguments,'length').length;var results=Array(length);for(var i=0;i<length;i++){results[i]=_.pluck(arguments,i);}
return results;};_.object=function(list,values){if(list==null)return{};var result={};for(var i=0,length=list.length;i<length;i++){if(values){result[list[i]]=values[i];}else{result[list[i][0]]=list[i][1];}}
return result;};_.indexOf=function(array,item,isSorted){if(array==null)return-1;var i=0,length=array.length;if(isSorted){if(typeof isSorted=='number'){i=isSorted<0?Math.max(0,length+isSorted):isSorted;}else{i=_.sortedIndex(array,item);return array[i]===item?i:-1;}}
for(;i<length;i++)if(array[i]===item)return i;return-1;};_.lastIndexOf=function(array,item,from){if(array==null)return-1;var idx=array.length;if(typeof from=='number'){idx=from<0?idx+from+1:Math.min(idx,from+1);}
while(--idx>=0)if(array[idx]===item)return idx;return-1;};_.range=function(start,stop,step){if(arguments.length<=1){stop=start||0;start=0;}
step=step||1;var length=Math.max(Math.ceil((stop-start)/step),0);var range=Array(length);for(var idx=0;idx<length;idx++,start+=step){range[idx]=start;}
return range;};var Ctor=function(){};_.bind=function(func,context){var args,bound;if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError('Bind must be called on a function');args=slice.call(arguments,2);bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));Ctor.prototype=func.prototype;var self=new Ctor;Ctor.prototype=null;var result=func.apply(self,args.concat(slice.call(arguments)));if(_.isObject(result))return result;return self;};return bound;};_.partial=function(func){var boundArgs=slice.call(arguments,1);return function(){var position=0;var args=boundArgs.slice();for(var i=0,length=args.length;i<length;i++){if(args[i]===_)args[i]=arguments[position++];}
while(position<arguments.length)args.push(arguments[position++]);return func.apply(this,args);};};_.bindAll=function(obj){var i,length=arguments.length,key;if(length<=1)throw new Error('bindAll must be passed function names');for(i=1;i<length;i++){key=arguments[i];obj[key]=_.bind(obj[key],obj);}
return obj;};_.memoize=function(func,hasher){var memoize=function(key){var cache=memoize.cache;var address=hasher?hasher.apply(this,arguments):key;if(!_.has(cache,address))cache[address]=func.apply(this,arguments);return cache[address];};memoize.cache={};return memoize;};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args);},wait);};_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)));};_.throttle=function(func,wait,options){var context,args,result;var timeout=null;var previous=0;if(!options)options={};var later=function(){previous=options.leading===false?0:_.now();timeout=null;result=func.apply(context,args);if(!timeout)context=args=null;};return function(){var now=_.now();if(!previous&&options.leading===false)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0||remaining>wait){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args);if(!timeout)context=args=null;}else if(!timeout&&options.trailing!==false){timeout=setTimeout(later,remaining);}
return result;};};_.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result;var later=function(){var last=_.now()-timestamp;if(last<wait&&last>0){timeout=setTimeout(later,wait-last);}else{timeout=null;if(!immediate){result=func.apply(context,args);if(!timeout)context=args=null;}}};return function(){context=this;args=arguments;timestamp=_.now();var callNow=immediate&&!timeout;if(!timeout)timeout=setTimeout(later,wait);if(callNow){result=func.apply(context,args);context=args=null;}
return result;};};_.wrap=function(func,wrapper){return _.partial(wrapper,func);};_.negate=function(predicate){return function(){return!predicate.apply(this,arguments);};};_.compose=function(){var args=arguments;var start=args.length-1;return function(){var i=start;var result=args[start].apply(this,arguments);while(i--)result=args[i].call(this,result);return result;};};_.after=function(times,func){return function(){if(--times<1){return func.apply(this,arguments);}};};_.before=function(times,func){var memo;return function(){if(--times>0){memo=func.apply(this,arguments);}else{func=null;}
return memo;};};_.once=_.partial(_.before,2);_.keys=function(obj){if(!_.isObject(obj))return[];if(nativeKeys)return nativeKeys(obj);var keys=[];for(var key in obj)if(_.has(obj,key))keys.push(key);return keys;};_.values=function(obj){var keys=_.keys(obj);var length=keys.length;var values=Array(length);for(var i=0;i<length;i++){values[i]=obj[keys[i]];}
return values;};_.pairs=function(obj){var keys=_.keys(obj);var length=keys.length;var pairs=Array(length);for(var i=0;i<length;i++){pairs[i]=[keys[i],obj[keys[i]]];}
return pairs;};_.invert=function(obj){var result={};var keys=_.keys(obj);for(var i=0,length=keys.length;i<length;i++){result[obj[keys[i]]]=keys[i];}
return result;};_.functions=_.methods=function(obj){var names=[];for(var key in obj){if(_.isFunction(obj[key]))names.push(key);}
return names.sort();};_.extend=function(obj){if(!_.isObject(obj))return obj;var source,prop;for(var i=1,length=arguments.length;i<length;i++){source=arguments[i];for(prop in source){if(hasOwnProperty.call(source,prop)){obj[prop]=source[prop];}}}
return obj;};_.pick=function(obj,iteratee,context){var result={},key;if(obj==null)return result;if(_.isFunction(iteratee)){iteratee=createCallback(iteratee,context);for(key in obj){var value=obj[key];if(iteratee(value,key,obj))result[key]=value;}}else{var keys=concat.apply([],slice.call(arguments,1));obj=new Object(obj);for(var i=0,length=keys.length;i<length;i++){key=keys[i];if(key in obj)result[key]=obj[key];}}
return result;};_.omit=function(obj,iteratee,context){if(_.isFunction(iteratee)){iteratee=_.negate(iteratee);}else{var keys=_.map(concat.apply([],slice.call(arguments,1)),String);iteratee=function(value,key){return!_.contains(keys,key);};}
return _.pick(obj,iteratee,context);};_.defaults=function(obj){if(!_.isObject(obj))return obj;for(var i=1,length=arguments.length;i<length;i++){var source=arguments[i];for(var prop in source){if(obj[prop]===void 0)obj[prop]=source[prop];}}
return obj;};_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj);};_.tap=function(obj,interceptor){interceptor(obj);return obj;};var eq=function(a,b,aStack,bStack){if(a===b)return a!==0||1/a===1/b;if(a==null||b==null)return a===b;if(a instanceof _)a=a._wrapped;if(b instanceof _)b=b._wrapped;var className=toString.call(a);if(className!==toString.call(b))return false;switch(className){case'[object RegExp]':case'[object String]':return''+a===''+b;case'[object Number]':if(+a!==+a)return+b!==+b;return+a===0?1/+a===1/b:+a===+b;case'[object Date]':case'[object Boolean]':return+a===+b;}
if(typeof a!='object'||typeof b!='object')return false;var length=aStack.length;while(length--){if(aStack[length]===a)return bStack[length]===b;}
var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&'constructor'in a&&'constructor'in b&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)){return false;}
aStack.push(a);bStack.push(b);var size,result;if(className==='[object Array]'){size=a.length;result=size===b.length;if(result){while(size--){if(!(result=eq(a[size],b[size],aStack,bStack)))break;}}}else{var keys=_.keys(a),key;size=keys.length;result=_.keys(b).length===size;if(result){while(size--){key=keys[size];if(!(result=_.has(b,key)&&eq(a[key],b[key],aStack,bStack)))break;}}}
aStack.pop();bStack.pop();return result;};_.isEqual=function(a,b){return eq(a,b,[],[]);};_.isEmpty=function(obj){if(obj==null)return true;if(_.isArray(obj)||_.isString(obj)||_.isArguments(obj))return obj.length===0;for(var key in obj)if(_.has(obj,key))return false;return true;};_.isElement=function(obj){return!!(obj&&obj.nodeType===1);};_.isArray=nativeIsArray||function(obj){return toString.call(obj)==='[object Array]';};_.isObject=function(obj){var type=typeof obj;return type==='function'||type==='object'&&!!obj;};_.each(['Arguments','Function','String','Number','Date','RegExp'],function(name){_['is'+name]=function(obj){return toString.call(obj)==='[object '+name+']';};});if(!_.isArguments(arguments)){_.isArguments=function(obj){return _.has(obj,'callee');};}
if(typeof/./!=='function'){_.isFunction=function(obj){return typeof obj=='function'||false;};}
_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj));};_.isNaN=function(obj){return _.isNumber(obj)&&obj!==+obj;};_.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)==='[object Boolean]';};_.isNull=function(obj){return obj===null;};_.isUndefined=function(obj){return obj===void 0;};_.has=function(obj,key){return obj!=null&&hasOwnProperty.call(obj,key);};_.noConflict=function(){root._=previousUnderscore;return this;};_.identity=function(value){return value;};_.constant=function(value){return function(){return value;};};_.noop=function(){};_.property=function(key){return function(obj){return obj[key];};};_.matches=function(attrs){var pairs=_.pairs(attrs),length=pairs.length;return function(obj){if(obj==null)return!length;obj=new Object(obj);for(var i=0;i<length;i++){var pair=pairs[i],key=pair[0];if(pair[1]!==obj[key]||!(key in obj))return false;}
return true;};};_.times=function(n,iteratee,context){var accum=Array(Math.max(0,n));iteratee=createCallback(iteratee,context,1);for(var i=0;i<n;i++)accum[i]=iteratee(i);return accum;};_.random=function(min,max){if(max==null){max=min;min=0;}
return min+Math.floor(Math.random()*(max-min+1));};_.now=Date.now||function(){return new Date().getTime();};var escapeMap={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#x27;','`':'&#x60;'};var unescapeMap=_.invert(escapeMap);var createEscaper=function(map){var escaper=function(match){return map[match];};var source='(?:'+_.keys(map).join('|')+')';var testRegexp=RegExp(source);var replaceRegexp=RegExp(source,'g');return function(string){string=string==null?'':''+string;return testRegexp.test(string)?string.replace(replaceRegexp,escaper):string;};};_.escape=createEscaper(escapeMap);_.unescape=createEscaper(unescapeMap);_.result=function(object,property){if(object==null)return void 0;var value=object[property];return _.isFunction(value)?object[property]():value;};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+'';return prefix?prefix+id:id;};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/;var escapes={"'":"'",'\\':'\\','\r':'r','\n':'n','\u2028':'u2028','\u2029':'u2029'};var escaper=/\\|'|\r|\n|\u2028|\u2029/g;var escapeChar=function(match){return'\\'+escapes[match];};_.template=function(text,settings,oldSettings){if(!settings&&oldSettings)settings=oldSettings;settings=_.defaults({},settings,_.templateSettings);var matcher=RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join('|')+'|$','g');var index=0;var source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){source+=text.slice(index,offset).replace(escaper,escapeChar);index=offset+match.length;if(escape){source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'";}else if(interpolate){source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'";}else if(evaluate){source+="';\n"+evaluate+"\n__p+='";}
return match;});source+="';\n";if(!settings.variable)source='with(obj||{}){\n'+source+'}\n';source="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+
source+'return __p;\n';try{var render=new Function(settings.variable||'obj','_',source);}catch(e){e.source=source;throw e;}
var template=function(data){return render.call(this,data,_);};var argument=settings.variable||'obj';template.source='function('+argument+'){\n'+source+'}';return template;};_.chain=function(obj){var instance=_(obj);instance._chain=true;return instance;};var result=function(obj){return this._chain?_(obj).chain():obj;};_.mixin=function(obj){_.each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];push.apply(args,arguments);return result.call(this,func.apply(_,args));};});};_.mixin(_);_.each(['pop','push','reverse','shift','sort','splice','unshift'],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;method.apply(obj,arguments);if((name==='shift'||name==='splice')&&obj.length===0)delete obj[0];return result.call(this,obj);};});_.each(['concat','join','slice'],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result.call(this,method.apply(this._wrapped,arguments));};});_.prototype.value=function(){return this._wrapped;};if(typeof define==='function'&&define.amd){define('underscore',[],function(){return _;});}}.call(this));sc={sessionState:{d:{},setItem:function(k,v){this.d[k]=v},getItem:function(k){return this.d[k]},save:function(){window.sessionStorage.setItem('__sc_state',JSON.stringify(sc.sessionState.d))},load:function(){this.d=JSON.parse(window.sessionStorage.getItem('__sc_state')||'{}')}}}
window.onunload=sc.sessionState.save;sc.sessionState.load();(function(){"use strict";var _camelizeCssPropName=function(){var matcherRegex=/\-([a-z])/g,replacerFn=function(match,group){return group.toUpperCase();};return function(prop){return prop.replace(matcherRegex,replacerFn);};}();var _getStyle=function(el,prop){var value,camelProp,tagName,possiblePointers,i,len;if(window.getComputedStyle){value=window.getComputedStyle(el,null).getPropertyValue(prop);}else{camelProp=_camelizeCssPropName(prop);if(el.currentStyle){value=el.currentStyle[camelProp];}else{value=el.style[camelProp];}}
if(prop==="cursor"){if(!value||value==="auto"){tagName=el.tagName.toLowerCase();possiblePointers=["a"];for(i=0,len=possiblePointers.length;i<len;i++){if(tagName===possiblePointers[i]){return"pointer";}}}}
return value;};var _elementMouseOver=function(event){if(!ZeroClipboard.prototype._singleton)return;if(!event){event=window.event;}
var target;if(this!==window){target=this;}else if(event.target){target=event.target;}else if(event.srcElement){target=event.srcElement;}
ZeroClipboard.prototype._singleton.setCurrent(target);};var _addEventHandler=function(element,method,func){if(element.addEventListener){element.addEventListener(method,func,false);}else if(element.attachEvent){element.attachEvent("on"+method,func);}};var _removeEventHandler=function(element,method,func){if(element.removeEventListener){element.removeEventListener(method,func,false);}else if(element.detachEvent){element.detachEvent("on"+method,func);}};var _addClass=function(element,value){if(element.addClass){element.addClass(value);return element;}
if(value&&typeof value==="string"){var classNames=(value||"").split(/\s+/);if(element.nodeType===1){if(!element.className){element.className=value;}else{var className=" "+element.className+" ",setClass=element.className;for(var c=0,cl=classNames.length;c<cl;c++){if(className.indexOf(" "+classNames[c]+" ")<0){setClass+=" "+classNames[c];}}
element.className=setClass.replace(/^\s+|\s+$/g,"");}}}
return element;};var _removeClass=function(element,value){if(element.removeClass){element.removeClass(value);return element;}
if(value&&typeof value==="string"||value===undefined){var classNames=(value||"").split(/\s+/);if(element.nodeType===1&&element.className){if(value){var className=(" "+element.className+" ").replace(/[\n\t]/g," ");for(var c=0,cl=classNames.length;c<cl;c++){className=className.replace(" "+classNames[c]+" "," ");}
element.className=className.replace(/^\s+|\s+$/g,"");}else{element.className="";}}}
return element;};var _getZoomFactor=function(){var rect,physicalWidth,logicalWidth,zoomFactor=1;if(typeof document.body.getBoundingClientRect==="function"){rect=document.body.getBoundingClientRect();physicalWidth=rect.right-rect.left;logicalWidth=document.body.offsetWidth;zoomFactor=Math.round(physicalWidth/logicalWidth*100)/100;}
return zoomFactor;};var _getDOMObjectPosition=function(obj){var info={left:0,top:0,width:0,height:0,zIndex:999999999};var zi=_getStyle(obj,"z-index");if(zi&&zi!=="auto"){info.zIndex=parseInt(zi,10);}
if(obj.getBoundingClientRect){var rect=obj.getBoundingClientRect();var pageXOffset,pageYOffset,zoomFactor;if("pageXOffset"in window&&"pageYOffset"in window){pageXOffset=window.pageXOffset;pageYOffset=window.pageYOffset;}else{zoomFactor=_getZoomFactor();pageXOffset=Math.round(document.documentElement.scrollLeft/zoomFactor);pageYOffset=Math.round(document.documentElement.scrollTop/zoomFactor);}
var leftBorderWidth=document.documentElement.clientLeft||0;var topBorderWidth=document.documentElement.clientTop||0;info.left=rect.left+pageXOffset-leftBorderWidth;info.top=rect.top+pageYOffset-topBorderWidth;info.width="width"in rect?rect.width:rect.right-rect.left;info.height="height"in rect?rect.height:rect.bottom-rect.top;}
return info;};var _noCache=function(path,options){var useNoCache=!(options&&options.useNoCache===false);if(useNoCache){return(path.indexOf("?")===-1?"?":"&")+"nocache="+new Date().getTime();}else{return"";}};var _vars=function(options){var str=[];var origins=[];if(options.trustedOrigins){if(typeof options.trustedOrigins==="string"){origins.push(options.trustedOrigins);}else if(typeof options.trustedOrigins==="object"&&"length"in options.trustedOrigins){origins=origins.concat(options.trustedOrigins);}}
if(options.trustedDomains){if(typeof options.trustedDomains==="string"){origins.push(options.trustedDomains);}else if(typeof options.trustedDomains==="object"&&"length"in options.trustedDomains){origins=origins.concat(options.trustedDomains);}}
if(origins.length){str.push("trustedOrigins="+encodeURIComponent(origins.join(",")));}
if(typeof options.amdModuleId==="string"&&options.amdModuleId){str.push("amdModuleId="+encodeURIComponent(options.amdModuleId));}
if(typeof options.cjsModuleId==="string"&&options.cjsModuleId){str.push("cjsModuleId="+encodeURIComponent(options.cjsModuleId));}
return str.join("&");};var _inArray=function(elem,array){if(array.indexOf){return array.indexOf(elem);}
for(var i=0,length=array.length;i<length;i++){if(array[i]===elem){return i;}}
return-1;};var _prepGlue=function(elements){if(typeof elements==="string")throw new TypeError("ZeroClipboard doesn't accept query strings.");if(!elements.length)return[elements];return elements;};var _dispatchCallback=function(func,element,instance,args,async){if(async){window.setTimeout(function(){func.call(element,instance,args);},0);}else{func.call(element,instance,args);}};var ZeroClipboard=function(elements,options){if(elements)(ZeroClipboard.prototype._singleton||this).glue(elements);if(ZeroClipboard.prototype._singleton)return ZeroClipboard.prototype._singleton;ZeroClipboard.prototype._singleton=this;this.options={};for(var kd in _defaults)this.options[kd]=_defaults[kd];for(var ko in options)this.options[ko]=options[ko];this.handlers={};if(ZeroClipboard.detectFlashSupport())_bridge();};var currentElement,gluedElements=[];ZeroClipboard.prototype.setCurrent=function(element){currentElement=element;this.reposition();var titleAttr=element.getAttribute("title");if(titleAttr){this.setTitle(titleAttr);}
var useHandCursor=this.options.forceHandCursor===true||_getStyle(element,"cursor")==="pointer";_setHandCursor.call(this,useHandCursor);return this;};ZeroClipboard.prototype.setText=function(newText){if(newText&&newText!==""){this.options.text=newText;if(this.ready())this.flashBridge.setText(newText);}
return this;};ZeroClipboard.prototype.setTitle=function(newTitle){if(newTitle&&newTitle!=="")this.htmlBridge.setAttribute("title",newTitle);return this;};ZeroClipboard.prototype.setSize=function(width,height){if(this.ready())this.flashBridge.setSize(width,height);return this;};ZeroClipboard.prototype.setHandCursor=function(enabled){enabled=typeof enabled==="boolean"?enabled:!!enabled;_setHandCursor.call(this,enabled);this.options.forceHandCursor=enabled;return this;};var _setHandCursor=function(enabled){if(this.ready())this.flashBridge.setHandCursor(enabled);};ZeroClipboard.version="1.2.3";var _defaults={moviePath:"ZeroClipboard.swf",trustedOrigins:null,text:null,hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",allowScriptAccess:"sameDomain",useNoCache:true,forceHandCursor:false};ZeroClipboard.setDefaults=function(options){for(var ko in options)_defaults[ko]=options[ko];};ZeroClipboard.destroy=function(){ZeroClipboard.prototype._singleton.unglue(gluedElements);var bridge=ZeroClipboard.prototype._singleton.htmlBridge;bridge.parentNode.removeChild(bridge);delete ZeroClipboard.prototype._singleton;};ZeroClipboard.detectFlashSupport=function(){var hasFlash=false;if(typeof ActiveXObject==="function"){try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){hasFlash=true;}}catch(error){}}
if(!hasFlash&&navigator.mimeTypes["application/x-shockwave-flash"]){hasFlash=true;}
return hasFlash;};var _amdModuleId=null;var _cjsModuleId=null;var _bridge=function(){var flashBridge,len;var client=ZeroClipboard.prototype._singleton;var container=document.getElementById("global-zeroclipboard-html-bridge");if(!container){var opts={};for(var ko in client.options)opts[ko]=client.options[ko];opts.amdModuleId=_amdModuleId;opts.cjsModuleId=_cjsModuleId;var flashvars=_vars(opts);var html='      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="global-zeroclipboard-flash-bridge" width="100%" height="100%">         <param name="movie" value="'+client.options.moviePath+_noCache(client.options.moviePath,client.options)+'"/>         <param name="allowScriptAccess" value="'+client.options.allowScriptAccess+'"/>         <param name="scale" value="exactfit"/>         <param name="loop" value="false"/>         <param name="menu" value="false"/>         <param name="quality" value="best" />         <param name="bgcolor" value="#ffffff"/>         <param name="wmode" value="transparent"/>         <param name="flashvars" value="'+flashvars+'"/>         <embed src="'+client.options.moviePath+_noCache(client.options.moviePath,client.options)+'"           loop="false" menu="false"           quality="best" bgcolor="#ffffff"           width="100%" height="100%"           name="global-zeroclipboard-flash-bridge"           allowScriptAccess="always"           allowFullScreen="false"           type="application/x-shockwave-flash"           wmode="transparent"           pluginspage="http://www.macromedia.com/go/getflashplayer"           flashvars="'+flashvars+'"           scale="exactfit">         </embed>       </object>';container=document.createElement("div");container.id="global-zeroclipboard-html-bridge";container.setAttribute("class","global-zeroclipboard-container");container.setAttribute("data-clipboard-ready",false);container.style.position="absolute";container.style.left="-9999px";container.style.top="-9999px";container.style.width="15px";container.style.height="15px";container.style.zIndex="9999";container.innerHTML=html;document.body.appendChild(container);}
client.htmlBridge=container;flashBridge=document["global-zeroclipboard-flash-bridge"];if(flashBridge&&(len=flashBridge.length)){flashBridge=flashBridge[len-1];}
client.flashBridge=flashBridge||container.children[0].lastElementChild;};ZeroClipboard.prototype.resetBridge=function(){this.htmlBridge.style.left="-9999px";this.htmlBridge.style.top="-9999px";this.htmlBridge.removeAttribute("title");this.htmlBridge.removeAttribute("data-clipboard-text");_removeClass(currentElement,this.options.activeClass);currentElement=null;this.options.text=null;return this;};ZeroClipboard.prototype.ready=function(){var ready=this.htmlBridge.getAttribute("data-clipboard-ready");return ready==="true"||ready===true;};ZeroClipboard.prototype.reposition=function(){if(!currentElement)return false;var pos=_getDOMObjectPosition(currentElement);this.htmlBridge.style.top=pos.top+"px";this.htmlBridge.style.left=pos.left+"px";this.htmlBridge.style.width=pos.width+"px";this.htmlBridge.style.height=pos.height+"px";this.htmlBridge.style.zIndex=pos.zIndex+1;this.setSize(pos.width,pos.height);return this;};ZeroClipboard.dispatch=function(eventName,args){ZeroClipboard.prototype._singleton.receiveEvent(eventName,args);};ZeroClipboard.prototype.on=function(eventName,func){var events=eventName.toString().split(/\s/g);for(var i=0;i<events.length;i++){eventName=events[i].toLowerCase().replace(/^on/,"");if(!this.handlers[eventName])this.handlers[eventName]=func;}
if(this.handlers.noflash&&!ZeroClipboard.detectFlashSupport()){this.receiveEvent("onNoFlash",null);}
return this;};ZeroClipboard.prototype.addEventListener=ZeroClipboard.prototype.on;ZeroClipboard.prototype.off=function(eventName,func){var events=eventName.toString().split(/\s/g);for(var i=0;i<events.length;i++){eventName=events[i].toLowerCase().replace(/^on/,"");for(var event in this.handlers){if(event===eventName&&this.handlers[event]===func){delete this.handlers[event];}}}
return this;};ZeroClipboard.prototype.removeEventListener=ZeroClipboard.prototype.off;ZeroClipboard.prototype.receiveEvent=function(eventName,args){eventName=eventName.toString().toLowerCase().replace(/^on/,"");var element=currentElement;var performCallbackAsync=true;switch(eventName){case"load":if(args&&parseFloat(args.flashVersion.replace(",",".").replace(/[^0-9\.]/gi,""))<10){this.receiveEvent("onWrongFlash",{flashVersion:args.flashVersion});return;}
this.htmlBridge.setAttribute("data-clipboard-ready",true);break;case"mouseover":_addClass(element,this.options.hoverClass);break;case"mouseout":_removeClass(element,this.options.hoverClass);this.resetBridge();break;case"mousedown":_addClass(element,this.options.activeClass);break;case"mouseup":_removeClass(element,this.options.activeClass);break;case"datarequested":var targetId=element.getAttribute("data-clipboard-target"),targetEl=!targetId?null:document.getElementById(targetId);if(targetEl){var textContent=targetEl.value||targetEl.textContent||targetEl.innerText;if(textContent)this.setText(textContent);}else{var defaultText=element.getAttribute("data-clipboard-text");if(defaultText)this.setText(defaultText);}
performCallbackAsync=false;break;case"complete":this.options.text=null;break;}
if(this.handlers[eventName]){var func=this.handlers[eventName];if(typeof func==="string"&&typeof window[func]==="function"){func=window[func];}
if(typeof func==="function"){_dispatchCallback(func,element,this,args,performCallbackAsync);}}};ZeroClipboard.prototype.glue=function(elements){elements=_prepGlue(elements);for(var i=0;i<elements.length;i++){if(_inArray(elements[i],gluedElements)==-1){gluedElements.push(elements[i]);_addEventHandler(elements[i],"mouseover",_elementMouseOver);}}
return this;};ZeroClipboard.prototype.unglue=function(elements){elements=_prepGlue(elements);for(var i=0;i<elements.length;i++){_removeEventHandler(elements[i],"mouseover",_elementMouseOver);var arrayIndex=_inArray(elements[i],gluedElements);if(arrayIndex!=-1)gluedElements.splice(arrayIndex,1);}
return this;};if(typeof define==="function"&&define.amd){define(["require","exports","module"],function(require,exports,module){_amdModuleId=module&&module.id||null;return ZeroClipboard;});}else if(typeof module==="object"&&module&&typeof module.exports==="object"&&module.exports){_cjsModuleId=module.id||null;module.exports=ZeroClipboard;}else{window.ZeroClipboard=ZeroClipboard;}})();if(!$.browser){$.browser={msie:document.documentMode!=undefined};}
(function($,e,b){var c="hashchange",h=document,f,g=$.event.special,i=h.documentMode,d="on"+c in e&&(i===b||i>7);function a(j){j=j||location.href;return"#"+j.replace(/^[^#]*#?(.*)$/,"$1")}$.fn[c]=function(j){return j?this.bind(c,j):this.trigger(c)};$.fn[c].delay=50;g[c]=$.extend(g[c],{setup:function(){if(d){return false}$(f.start)},teardown:function(){if(d){return false}$(f.stop)}});f=(function(){var j={},p,m=a(),k=function(q){return q},l=k,o=k;j.start=function(){p||n()};j.stop=function(){p&&clearTimeout(p);p=b};function n(){var r=a(),q=o(m);if(r!==m){l(m=r,q);$(e).trigger(c)}else{if(q!==m){location.href=location.href.replace(/#.*/,"")+q}}p=setTimeout(n,$.fn[c].delay)}$.browser.msie&&!d&&(function(){var q,r;j.start=function(){if(!q){r=$.fn[c].src;r=r&&r+a();q=$('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){r||l(a());n()}).attr("src",r||"javascript:0").insertAfter("body")[0].contentWindow;h.onpropertychange=function(){try{if(event.propertyName==="title"){q.document.title=h.title}}catch(s){}}}};j.stop=k;o=function(){return a(q.location.href)};l=function(v,s){var u=q.document,t=$.fn[c].domain;if(v!==s){u.title=h.title;u.open();t&&u.write('<script>document.domain="'+t+'"<\/script>');u.close();q.location.hash=v}}})();return j})()})(jQuery,this);(function(a){a.easytabs=function(j,e){var f=this,q=a(j),i={animate:true,panelActiveClass:"active",tabActiveClass:"active",defaultTab:"li:first-child",animationSpeed:"normal",tabs:"> ul > li",updateHash:true,cycle:false,collapsible:false,collapsedClass:"collapsed",collapsedByDefault:true,uiTabs:false,transitionIn:"fadeIn",transitionOut:"fadeOut",transitionInEasing:"swing",transitionOutEasing:"swing",transitionCollapse:"slideUp",transitionUncollapse:"slideDown",transitionCollapseEasing:"swing",transitionUncollapseEasing:"swing",containerClass:"",tabsClass:"",tabClass:"",panelClass:"",cache:true,event:"click",panelContext:q},h,l,v,m,d,t={fast:200,normal:400,slow:600},r;f.init=function(){f.settings=r=a.extend({},i,e);r.bind_str=r.event+".easytabs";if(r.uiTabs){r.tabActiveClass="ui-tabs-selected";r.containerClass="ui-tabs ui-widget ui-widget-content ui-corner-all";r.tabsClass="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all";r.tabClass="ui-state-default ui-corner-top";r.panelClass="ui-tabs-panel ui-widget-content ui-corner-bottom"}if(r.collapsible&&e.defaultTab!==undefined&&e.collpasedByDefault===undefined){r.collapsedByDefault=false}if(typeof(r.animationSpeed)==="string"){r.animationSpeed=t[r.animationSpeed]}a("a.anchor").remove().prependTo("body");q.data("easytabs",{});f.setTransitions();f.getTabs();b();g();w();n();c();q.attr("data-easytabs",true)};f.setTransitions=function(){v=(r.animate)?{show:r.transitionIn,hide:r.transitionOut,speed:r.animationSpeed,collapse:r.transitionCollapse,uncollapse:r.transitionUncollapse,halfSpeed:r.animationSpeed/2}:{show:"show",hide:"hide",speed:0,collapse:"hide",uncollapse:"show",halfSpeed:0}};f.getTabs=function(){var x;f.tabs=q.find(r.tabs),f.panels=a(),f.tabs.each(function(){var A=a(this),z=A.children("a"),y=A.children("a").data("target");A.data("easytabs",{});if(y!==undefined&&y!==null){A.data("easytabs").ajax=z.attr("href")}else{y=z.attr("href")}y=y.match(/#([^\?]+)/)[1];x=r.panelContext.find("#"+y);if(x.length){x.data("easytabs",{position:x.css("position"),visibility:x.css("visibility")});x.not(r.panelActiveClass).hide();f.panels=f.panels.add(x);A.data("easytabs").panel=x}else{f.tabs=f.tabs.not(A);if("console"in window){console.warn("Warning: tab without matching panel for selector '#"+y+"' removed from set")}}})};f.selectTab=function(x,C){var y=window.location,B=y.hash.match(/^[^\?]*/)[0],z=x.parent().data("easytabs").panel,A=x.parent().data("easytabs").ajax;if(r.collapsible&&!d&&(x.hasClass(r.tabActiveClass)||x.hasClass(r.collapsedClass))){f.toggleTabCollapse(x,z,A,C)}else{if(!x.hasClass(r.tabActiveClass)||!z.hasClass(r.panelActiveClass)){o(x,z,A,C)}else{if(!r.cache){o(x,z,A,C)}}}};f.toggleTabCollapse=function(x,y,z,A){f.panels.stop(true,true);if(u(q,"easytabs:before",[x,y,r])){f.tabs.filter("."+r.tabActiveClass).removeClass(r.tabActiveClass).children().removeClass(r.tabActiveClass);if(x.hasClass(r.collapsedClass)){if(z&&(!r.cache||!x.parent().data("easytabs").cached)){q.trigger("easytabs:ajax:beforeSend",[x,y]);y.load(z,function(C,B,D){x.parent().data("easytabs").cached=true;q.trigger("easytabs:ajax:complete",[x,y,C,B,D])})}x.parent().removeClass(r.collapsedClass).addClass(r.tabActiveClass).children().removeClass(r.collapsedClass).addClass(r.tabActiveClass);y.addClass(r.panelActiveClass)[v.uncollapse](v.speed,r.transitionUncollapseEasing,function(){q.trigger("easytabs:midTransition",[x,y,r]);if(typeof A=="function"){A()}})}else{x.addClass(r.collapsedClass).parent().addClass(r.collapsedClass);y.removeClass(r.panelActiveClass)[v.collapse](v.speed,r.transitionCollapseEasing,function(){q.trigger("easytabs:midTransition",[x,y,r]);if(typeof A=="function"){A()}})}}};f.matchTab=function(x){return f.tabs.find("[href='"+x+"'],[data-target='"+x+"']").first()};f.matchInPanel=function(x){return(x&&f.validId(x)?f.panels.filter(":has("+x+")").first():[])};f.validId=function(x){return x.substr(1).match(/^[A-Za-z]+[A-Za-z0-9\-_:\.].$/)};f.selectTabFromHashChange=function(){var y=window.location.hash.match(/^[^\?]*/)[0],x=f.matchTab(y),z;if(r.updateHash){if(x.length){d=true;f.selectTab(x)}else{z=f.matchInPanel(y);if(z.length){y="#"+z.attr("id");x=f.matchTab(y);d=true;f.selectTab(x)}else{if(!h.hasClass(r.tabActiveClass)&&!r.cycle){if(y===""||f.matchTab(m).length||q.closest(y).length){d=true;f.selectTab(l)}}}}}};f.cycleTabs=function(x){if(r.cycle){x=x%f.tabs.length;$tab=a(f.tabs[x]).children("a").first();d=true;f.selectTab($tab,function(){setTimeout(function(){f.cycleTabs(x+1)},r.cycle)})}};f.publicMethods={select:function(x){var y;if((y=f.tabs.filter(x)).length===0){if((y=f.tabs.find("a[href='"+x+"']")).length===0){if((y=f.tabs.find("a"+x)).length===0){if((y=f.tabs.find("[data-target='"+x+"']")).length===0){if((y=f.tabs.find("a[href$='"+x+"']")).length===0){a.error("Tab '"+x+"' does not exist in tab set")}}}}}else{y=y.children("a").first()}f.selectTab(y)}};var u=function(A,x,z){var y=a.Event(x);A.trigger(y,z);return y.result!==false};var b=function(){q.addClass(r.containerClass);f.tabs.parent().addClass(r.tabsClass);f.tabs.addClass(r.tabClass);f.panels.addClass(r.panelClass)};var g=function(){var y=window.location.hash.match(/^[^\?]*/)[0],x=f.matchTab(y).parent(),z;if(x.length===1){h=x;r.cycle=false}else{z=f.matchInPanel(y);if(z.length){y="#"+z.attr("id");h=f.matchTab(y).parent()}else{h=f.tabs.parent().find(r.defaultTab);if(h.length===0){a.error("The specified default tab ('"+r.defaultTab+"') could not be found in the tab set ('"+r.tabs+"') out of "+f.tabs.length+" tabs.")}}}l=h.children("a").first();p(x)};var p=function(z){var y,x;if(r.collapsible&&z.length===0&&r.collapsedByDefault){h.addClass(r.collapsedClass).children().addClass(r.collapsedClass)}else{y=a(h.data("easytabs").panel);x=h.data("easytabs").ajax;if(x&&(!r.cache||!h.data("easytabs").cached)){q.trigger("easytabs:ajax:beforeSend",[l,y]);y.load(x,function(B,A,C){h.data("easytabs").cached=true;q.trigger("easytabs:ajax:complete",[l,y,B,A,C])})}h.data("easytabs").panel.show().addClass(r.panelActiveClass);h.addClass(r.tabActiveClass).children().addClass(r.tabActiveClass)}q.trigger("easytabs:initialised",[l,y])};var w=function(){f.tabs.children("a").bind(r.bind_str,function(x){r.cycle=false;d=false;f.selectTab(a(this));x.preventDefault?x.preventDefault():x.returnValue=false})};var o=function(z,D,E,H){f.panels.stop(true,true);if(u(q,"easytabs:before",[z,D,r])){var A=f.panels.filter(":visible"),y=D.parent(),F,x,C,G,B=window.location.hash.match(/^[^\?]*/)[0];if(r.animate){F=s(D);x=A.length?k(A):0;C=F-x}m=B;G=function(){q.trigger("easytabs:midTransition",[z,D,r]);if(r.animate&&r.transitionIn=="fadeIn"){if(C<0){y.animate({height:y.height()+C},v.halfSpeed).css({"min-height":""})}}if(r.updateHash&&!d){window.location.hash="#"+D.attr("id")}else{d=false}D[v.show](v.speed,r.transitionInEasing,function(){y.css({height:"","min-height":""});q.trigger("easytabs:after",[z,D,r]);if(typeof H=="function"){H()}})};if(E&&(!r.cache||!z.parent().data("easytabs").cached)){q.trigger("easytabs:ajax:beforeSend",[z,D]);D.load(E,function(J,I,K){z.parent().data("easytabs").cached=true;q.trigger("easytabs:ajax:complete",[z,D,J,I,K])})}if(r.animate&&r.transitionOut=="fadeOut"){if(C>0){y.animate({height:(y.height()+C)},v.halfSpeed)}else{y.css({"min-height":y.height()})}}f.tabs.filter("."+r.tabActiveClass).removeClass(r.tabActiveClass).children().removeClass(r.tabActiveClass);f.tabs.filter("."+r.collapsedClass).removeClass(r.collapsedClass).children().removeClass(r.collapsedClass);z.parent().addClass(r.tabActiveClass).children().addClass(r.tabActiveClass);f.panels.filter("."+r.panelActiveClass).removeClass(r.panelActiveClass);D.addClass(r.panelActiveClass);if(A.length){A[v.hide](v.speed,r.transitionOutEasing,G)}else{D[v.uncollapse](v.speed,r.transitionUncollapseEasing,G)}}};var s=function(z){if(z.data("easytabs")&&z.data("easytabs").lastHeight){return z.data("easytabs").lastHeight}var B=z.css("display"),y,x;try{y=a("<div></div>",{position:"absolute",visibility:"hidden",overflow:"hidden"})}catch(A){y=a("<div></div>",{visibility:"hidden",overflow:"hidden"})}x=z.wrap(y).css({position:"relative",visibility:"hidden",display:"block"}).outerHeight();z.unwrap();z.css({position:z.data("easytabs").position,visibility:z.data("easytabs").visibility,display:B});z.data("easytabs").lastHeight=x;return x};var k=function(y){var x=y.outerHeight();if(y.data("easytabs")){y.data("easytabs").lastHeight=x}else{y.data("easytabs",{lastHeight:x})}return x};var n=function(){if(typeof a(window).hashchange==="function"){a(window).hashchange(function(){f.selectTabFromHashChange()})}else{if(a.address&&typeof a.address.change==="function"){a.address.change(function(){f.selectTabFromHashChange()})}}};var c=function(){var x;if(r.cycle){x=f.tabs.index(h);setTimeout(function(){f.cycleTabs(x+1)},r.cycle)}};f.init()};a.fn.easytabs=function(c){var b=arguments;return this.each(function(){var e=a(this),d=e.data("easytabs");if(undefined===d){d=new a.easytabs(this,c);e.data("easytabs",d)}if(d.publicMethods[c]){return d.publicMethods[c](Array.prototype.slice.call(b,1))}})}})(jQuery);(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'){factory(require('jquery'));}else{factory(jQuery);}}(function($){var pluses=/\+/g;function encode(s){return config.raw?s:encodeURIComponent(s);}
function decode(s){return config.raw?s:decodeURIComponent(s);}
function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value));}
function parseCookieValue(s){if(s.indexOf('"')===0){s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,'\\');}
try{s=decodeURIComponent(s.replace(pluses,' '));return config.json?JSON.parse(s):s;}catch(e){}}
function read(s,converter){var value=config.raw?s:parseCookieValue(s);return $.isFunction(converter)?converter(value):value;}
var config=$.cookie=function(key,value,options){if(value!==undefined&&!$.isFunction(value)){options=$.extend({},config.defaults,options);if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setTime(+t+days*864e+5);}
return(document.cookie=[encode(key),'=',stringifyCookieValue(value),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?'; secure':''].join(''));}
var result=key?undefined:{};var cookies=document.cookie?document.cookie.split('; '):[];for(var i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split('=');var name=decode(parts.shift());var cookie=parts.join('=');if(key&&key===name){result=read(cookie,value);break;}
if(!key&&(cookie=read(cookie))!==undefined){result[name]=cookie;}}
return result;};config.defaults={};$.removeCookie=function(key,options){if($.cookie(key)===undefined){return false;}
$.cookie(key,'',$.extend({},options,{expires:-1}));return!$.cookie(key);};}));if(jQuery)(function($){$.extend($.fn,{dropdown:function(method,data){switch(method){case'show':show(null,$(this));return $(this);case'hide':hide();return $(this);case'attach':return $(this).attr('data-dropdown',data);case'detach':hide();return $(this).removeAttr('data-dropdown');case'disable':return $(this).addClass('dropdown-disabled');case'enable':hide();return $(this).removeClass('dropdown-disabled');}}});function show(event,object){var trigger=event?$(this):object,dropdown=$(trigger.attr('data-dropdown')),isOpen=trigger.hasClass('dropdown-open');if(event){if($(event.target).hasClass('dropdown-ignore'))return;event.preventDefault();event.stopPropagation();}else{if(trigger!==object.target&&$(object.target).hasClass('dropdown-ignore'))return;}
hide();if(isOpen||trigger.hasClass('dropdown-disabled'))return;trigger.addClass('dropdown-open');dropdown.data('dropdown-trigger',trigger).show();position();dropdown.trigger('show',{dropdown:dropdown,trigger:trigger});}
function hide(event){var targetGroup=event?$(event.target).parents().addBack():null;if(targetGroup&&targetGroup.is('.dropdown')){if(targetGroup.is('.dropdown-menu')){if(!targetGroup.is('A'))return;}else{return;}}
$(document).find('.dropdown:visible').each(function(){var dropdown=$(this);dropdown.hide().removeData('dropdown-trigger').trigger('hide',{dropdown:dropdown});});$(document).find('.dropdown-open').removeClass('dropdown-open');}
function position(){var dropdown=$('.dropdown:visible').eq(0),trigger=dropdown.data('dropdown-trigger'),hOffset=trigger?parseInt(trigger.attr('data-horizontal-offset')||0,10):null,vOffset=trigger?parseInt(trigger.attr('data-vertical-offset')||0,10):null;if(dropdown.length===0||!trigger)return;if(dropdown.hasClass('dropdown-relative')){dropdown.css({left:dropdown.hasClass('dropdown-anchor-right')?trigger.position().left-(dropdown.outerWidth(true)-trigger.outerWidth(true))-parseInt(trigger.css('margin-right'),10)+hOffset:trigger.position().left+parseInt(trigger.css('margin-left'),10)+hOffset,top:trigger.position().top+trigger.outerHeight(true)-parseInt(trigger.css('margin-top'),10)+vOffset});}else{dropdown.css({left:dropdown.hasClass('dropdown-anchor-right')?trigger.offset().left-(dropdown.outerWidth()-trigger.outerWidth())+hOffset:trigger.offset().left+hOffset,top:trigger.offset().top+trigger.outerHeight()+vOffset});}}
$(document).on('click.dropdown','[data-dropdown]',show);$(document).on('click.dropdown',hide);$(window).on('resize',position);})(jQuery);!function(root){'use strict';function Polyglot(options){options=options||{};this.phrases={};this.extend(options.phrases||{});this.currentLocale=options.locale||'en';this.allowMissing=!!options.allowMissing;this.warn=options.warn||warn;}
Polyglot.VERSION='0.4.1';Polyglot.prototype.locale=function(newLocale){if(newLocale)this.currentLocale=newLocale;return this.currentLocale;};Polyglot.prototype.extend=function(morePhrases,prefix){var phrase;for(var key in morePhrases){if(morePhrases.hasOwnProperty(key)){phrase=morePhrases[key];if(prefix)key=prefix+'.'+key;if(typeof phrase==='object'){this.extend(phrase,key);}else{this.phrases[key]=phrase;}}}};Polyglot.prototype.clear=function(){this.phrases={};};Polyglot.prototype.replace=function(newPhrases){this.clear();this.extend(newPhrases);};Polyglot.prototype.t=function(key,options){var result;options=options==null?{}:options;if(typeof options==='number'){options={smart_count:options};}
var phrase=this.phrases[key]||options._||(this.allowMissing?key:'');if(phrase===''){this.warn('Missing translation for key: "'+key+'"');result=key;}else{options=clone(options);result=choosePluralForm(phrase,this.currentLocale,options.smart_count);result=interpolate(result,options);}
return result;};var delimeter='||||';var pluralTypes={chinese:function(n){return 0;},german:function(n){return n!==1?1:0;},french:function(n){return n>1?1:0;},russian:function(n){return n%10===1&&n%100!==11?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2;},czech:function(n){return(n===1)?0:(n>=2&&n<=4)?1:2;},polish:function(n){return(n===1?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2);},icelandic:function(n){return(n%10!==1||n%100===11)?1:0;}};var pluralTypeToLanguages={chinese:['fa','id','ja','ko','lo','ms','th','tr','zh'],german:['da','de','en','es','fi','el','he','hu','it','nl','no','pt','sv','ca'],french:['fr','tl','pt-br','my'],russian:['hr','ru'],czech:['cs'],polish:['pl'],icelandic:['is']};function langToTypeMap(mapping){var type,langs,l,ret={};for(type in mapping){if(mapping.hasOwnProperty(type)){langs=mapping[type];for(l in langs){ret[langs[l]]=type;}}}
return ret;}
function trim(str){var trimRe=/^\s+|\s+$/g;return str.replace(trimRe,'');}
function choosePluralForm(text,locale,count){var ret,texts,chosenText;if(count!=null&&text){texts=text.split(delimeter);chosenText=texts[pluralTypeIndex(locale,count)]||texts[0];ret=trim(chosenText);}else{ret=text;}
return ret;}
function pluralTypeName(locale){var langToPluralType=langToTypeMap(pluralTypeToLanguages);return langToPluralType[locale]||langToPluralType.en;}
function pluralTypeIndex(locale,count){return pluralTypes[pluralTypeName(locale)](count);}
function interpolate(phrase,options){for(var arg in options){if(arg!=='_'&&options.hasOwnProperty(arg)){phrase=phrase.replace(new RegExp('%\\{'+arg+'\\}','g'),options[arg]);}}
return phrase;}
function warn(message){root.console&&root.console.warn&&root.console.warn('WARNING: '+message);}
function clone(source){var ret={};for(var prop in source){ret[prop]=source[prop];}
return ret;}
if(typeof module!=='undefined'&&module.exports){module.exports=Polyglot;}else{root.Polyglot=Polyglot;}}(this);$.fn.scrollLock=function(){return $(this).on("DOMMouseScroll mousewheel",function(h){var g=$(this),f=this.scrollTop,d=this.scrollHeight,b=g.height(),i=h.originalEvent.wheelDelta,a=i>0,c=function(){h.stopPropagation();h.preventDefault();h.returnValue=false;return false};if(!a&&-i>d-b-f){g.scrollTop(d);return c()}else{if(a&&i>f){g.scrollTop(0);return c()}}})};$.fn.scrollRelease=function(){return $(this).off("DOMMouseScroll mousewheel")};;(function($){$.fn.unveil=function(threshold,callback){var $w=$(window),th=threshold||0,retina=window.devicePixelRatio>1,attrib=retina?"data-src-retina":"data-src",images=this,loaded;this.one("unveil",function(){var source=this.getAttribute(attrib);source=source||this.getAttribute("data-src");if(source){this.setAttribute("src",source);if(typeof callback==="function")callback.call(this);}});function unveil(){var inview=images.filter(function(){var $e=$(this);if($e.is(":hidden"))return;var wt=$w.scrollTop(),wb=wt+$w.height(),et=$e.offset().top,eb=et+$e.height();return eb>=wt-th&&et<=wb+th;});loaded=inview.trigger("unveil");images=images.not(loaded);}
$w.on("scroll.unveil resize.unveil lookup.unveil",unveil);unveil();return this;};})(window.jQuery||window.Zepto);;(function(document,$){var proto=$.fn,details,isOpera=Object.prototype.toString.call(window.opera)=='[object Opera]',isDetailsSupported=(function(doc){var el=doc.createElement('details'),fake,root,diff;if(!('open'in el)){return false;}
root=doc.body||(function(){var de=doc.documentElement;fake=true;return de.insertBefore(doc.createElement('body'),de.firstElementChild||de.firstChild);}());el.innerHTML='<summary>a</summary>b';el.style.display='block';root.appendChild(el);diff=el.offsetHeight;el.open=true;diff=diff!=el.offsetHeight;root.removeChild(el);if(fake){root.parentNode.removeChild(root);}
return diff;}(document)),toggleOpen=function($details,$detailsSummary,$detailsNotSummary,toggle){var isOpen=$details.prop('open'),close=isOpen&&toggle||!isOpen&&!toggle;if(close){$details.removeClass('open').prop('open',false).triggerHandler('close.details');$detailsSummary.attr('aria-expanded',false);$detailsNotSummary.hide();}else{$details.addClass('open').prop('open',true).triggerHandler('open.details');$detailsSummary.attr('aria-expanded',true);$detailsNotSummary.show();}};proto.noSelect=function(){var none='none';return this.bind('selectstart dragstart mousedown',function(){return false;}).css({'MozUserSelect':none,'msUserSelect':none,'webkitUserSelect':none,'userSelect':none});};if(isDetailsSupported){details=proto.details=function(){return this.each(function(){var $details=$(this),$summary=$('summary',$details).first();$summary.attr({'role':'button','aria-expanded':$details.prop('open')}).on('click',function(){var close=$details.prop('open');$summary.attr('aria-expanded',!close);$details.triggerHandler((close?'close':'open')+'.details');});});};details.support=isDetailsSupported;}else{details=proto.details=function(){return this.each(function(){var $details=$(this),$detailsSummary=$('summary',$details).first(),$detailsNotSummary=$details.children(':not(summary)'),$detailsNotSummaryContents=$details.contents(':not(summary)');if(!$detailsSummary.length){$detailsSummary=$('<summary>').text('Details').prependTo($details);}
if($detailsNotSummary.length!=$detailsNotSummaryContents.length){$detailsNotSummaryContents.filter(function(){return this.nodeType==3&&/[^ \t\n\f\r]/.test(this.data);}).wrap('<span>');$detailsNotSummary=$details.children(':not(summary)');}
$details.prop('open',typeof $details.attr('open')=='string');toggleOpen($details,$detailsSummary,$detailsNotSummary);$detailsSummary.attr('role','button').noSelect().prop('tabIndex',0).on('click',function(){$detailsSummary.focus();toggleOpen($details,$detailsSummary,$detailsNotSummary,true);}).keyup(function(event){if(32==event.keyCode||(13==event.keyCode&&!isOpera)){event.preventDefault();$detailsSummary.click();}});});};details.support=isDetailsSupported;}}(document,jQuery));sc.intr={lang:window.localStorage.getItem('sc.intr.lang')||'en',run:function(){var self=this;$('.translations').each(function(i,div){var $div=$(div),id="dropdown-"+(i+1),$links=$div.find('.tran'),$trigger=$('<a href="#"/>'),$specialLang=$div.find('a:contains('+self.lang+')').first();$div.addClass('ready');if($specialLang.length){$specialLang.addClass('special');$div.prepend($specialLang);if($links.length==1){return}}
$trigger.text($links.length-1+' ')
var $dropdown=$('<div class="dropdown dropdown-relative dropdown-tip dropdown-anchor-right"/>'),$dropdownPanel=$('<div class="dropdown-panel"/>');$trigger.attr('data-dropdown','#'+id);$dropdown.attr('id',id);$trigger.dropdown('attach','#'+id);$dropdownPanel.append($links);$dropdown.append($dropdownPanel);$div.append($trigger)
$div.append($dropdown)
if($specialLang.length){$div.prepend($specialLang.addClass('special'));}else{$div.prepend('<span class="tran special">  </span>')}});$('.divtable').on('click','.tran',function(e){self.setLang($(e.target).text())});self.addHasTrans();},setLang:function(lang){this.lang=lang;window.localStorage.setItem('sc.intr.lang',lang);},switchLang:function(e){var self=sc.intr,lang=$(e.target).text();self.setLang(lang);self.run();},getTransCounts:function(callback){$.ajax('/data?translation_count=&langs=&lang='+sc.intr.lang).done(callback);},makeLangSwitcher:function(langs){var out=$('<span class="switcher"/>');for(key in langs){if(!langs[key].root){out.append('<a class="lang-switch" href="#'+key+'">'+key+'</a>');}}
return out},addHasTrans:function(){var self=sc.intr;this.getTransCounts(function(data){self.trCounts=data.translation_count;self.langs=data.langs;self.addLangNames();if(!self.lang)return
var polyglot=new Polyglot({phrases:self.data[self.lang],locale:self.lang}),t=polyglot.t.bind(polyglot);var langSwitcher=self.makeLangSwitcher(self.langs);$('#panel .contents').each(function(){var firstNum=0;$(this).find('a').each(function(){var $a=$(this),href=$a.attr('href'),uid=href?href.slice(1):null;if(uid&&self.trCounts[uid]){$a.attr('data-translation-count',self.trCounts[uid]);if(firstNum==0){firstNum=self.trCounts[uid]}
$a.attr('title',t("n_translations",self.trCounts[uid]));}});});});$('#panel').on('click','.lang-switch',self.switchLang);},addLangNames:function(){$('.translations .tran:not(.special)').each(function(i,tran){var uid=$(tran).text();$(tran).attr('data-name',sc.intr.langs[uid].name);});},data:{id:{n_translations:"%{smart_count} terjemahan dalam bahasa Indonesia"},zh:{n_translations:"%{smart_count}"},th:{n_translations:"%{smart_count}  "},vi:{n_translations:"%{smart_count} bn dch bng ting Vit"},en:{n_translations:"%{smart_count} translation in english||||%{smart_count} translations in english"},no:{n_translations:"%{smart_count} En oversettelse i norsk||||%{smart_count} oversettelser i norske"},sv:{n_translations:"%{smart_count} versttningen p svenska||||%{smart_count} versttningar i svenska"},ca:{n_translations:"%{smart_count}  traducci en catal||||%{smart_count} traduccions en catal"},nl:{n_translations:"%{smart_count} 1 vertaling in het Nederlands||||%{smart_count} vertalingen in het Nederlands"},de:{n_translations:"%{smart_count} bersetzung in Deutsch||||%{smart_count} bersetzungen in Deutsch"},hi:{n_translations:"   ||||  %{smart_count}  "},hu:{n_translations:"%{smart_count} fordtst magyarul||||%{smart_count} fordtsokat Magyar"},it:{n_translations:"%{smart_count} traduzione in italiano||||%{smart_count} traduzioni in italiano"},pt:{n_translations:"%{smart_count} traduo em Portugus||||%{smart_count} tradues em portugus"},es:{n_translations:"%{smart_count} traduccin en espaol||||%{smart_count} traducciones en espaol"},si:{n_translations:" %{smart_count} |||| %{smart_count} "},fr:{n_translations:"%{smart_count} traductions en franais||||%{smart_count} traductions en franais"},my:{n_translations:" 0  || 23 "},ko:{n_translations:"%{smart_count}  0 |||| %{smart_count} "},ru:{n_translations:"%{smart_count}    ||||%{smart_count}   ||||%{smart_count}    "},cs:{n_translations:"%{smart_count} peklad do etiny||||%{smart_count} peklady v etin||||%{smart_count} peklady v etin"},pl:{n_translations:"%{smart_count} Tumaczenie w jzyku polskim||||%{smart_count} tumaczenia w jzyku polskim||||%{smart_count} tumacze w jzyku polskim"}}}
sc.intr.run()
String.prototype.format=function(){"use strict"
var args=arguments,fs=this,i=0,j=-1;fs=fs.replace('{{','\x01\x02').replace('}}','\x03\x04');fs=fs.replace(/\{[^}]*\}/g,function(m){j++;var m=/\{(\w*)([^}]*)\}/.exec(m),key=m[1],attrs=m[2],obj,k,a;if(!key&&!attrs){if(j!=i)throw new Error("Cannot switch from automatic field numbering to manual field specification");return args[i++];}else if(!isNaN(key)){if(key>=args.length)throw new Error("Index out of range");obj=args[key];}else{if(!(key in args[0]))
throw new Error('Key Error: '+key);obj=args[0][key];}
if(!attrs)return obj;a=attrs.split(/([.\[])/);for(k=0;k<a.length;k+=2){key=a[k]
if(key==''&&k==0)continue;if(a[k-1]=='['){if(key.slice(-1)!=']')
throw new Error("Format Syntax Error, unmatched [");key=key.slice(0,-1);}
obj=obj[key]}
return obj;});fs=fs.replace('\x01\x02','{').replace('\x03\x04','}');return fs}
String.prototype.toTitleCase=function(){var skip=this.toTitleCase.skip;var string=this.replace(/(\S)(\S+)/g,function(m,m1,m2){if(m in skip)return m
else
return m1.toUpperCase()+m2});return string[0].toUpperCase()+string.slice(1);}
String.prototype.toTitleCase.skip={"the":0,"on":0,"of":0,"and":0,"in":0,"by":0}
String.prototype.join=function(a){return Array.prototype.join.call(a,this)}
var sc=window.sc||{}
sc.util={asciify:function(string,defaultChar){var mapping=sc.util.getAsciifyMap();if(defaultChar===undefined)
defaultChar='';return string.replace(/[\u007f-\uffff]/g,function(t){return mapping[t]||defaultChar})},unifyRegexPattern:function(string){var mapping=sc.util.getUnifyMap();return string.replace(/[ -~]/g,function(t){return'['+t+(mapping[t]||'')+']'});},getAsciifyMap:function(){if(!sc.util._asciifyMap)
sc.util._generateMaps()
return sc.util._asciifyMap;},getUnifyMap:function(){if(!sc.util._unifyMap)
sc.util._generateMaps()
return sc.util._unifyMap;},_generateMaps:function(){var data=[';','<','=','>','`','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','r','s','t','u','v','w','x','y','z','-','"','\''],ascmap={},unimap={}
data.forEach(function(s){var o=s[0],i,c,oupper=o.toUpperCase();for(i=s.length-1;i>=1;i--){c=s[i]
ascmap[c]=o
ascmap[c.toUpperCase()]=oupper;}
unimap[o]=s.slice(1)
unimap[oupper]=unimap[o].toUpperCase()});sc.util._asciifyMap=ascmap;sc.util._unifyMap=unimap;},acro_to_name:function(acro){acro=acro.replace('&nbsp;',' ').replace('',' ');var parts=acro.trim().toLowerCase().split(' '),out=[],n;for(var i=0;i<parts.length;i++){if(/[.\d]+/.test(parts[i])){out.push(parts[i])}else{n=this.expand_uid_data[parts[i]];if(n)
out.push(n[1])}}
return out.join(' ');},_expandUid:function(uid,i){var self=this,spaced=uid.replace(/(\D)(\d)/g,'$1 $2'),expansion;return spaced.replace(/[^\d\s]+/g,function(m){expansion=self.expand_uid_data[m];return expansion?expansion[i]:m;})
return acro;},uidToAcro:function(uid){return this._expandUid(uid,0);},uidToName:function(uid){return this._expandUid(uid,1);}}
sc.util.expand_uid_data={"pts1":["PTS 1","Pali Text Society 1st ed. 24242535 (18811992)"],"kp":["Kp","Khuddakapha"],"qizil":["Qizil","Qizil"],"uf":["Uigh","Uighur fragments"],"mu":["Mu","Mlasarvstivda"],"ja":["Ja","Jtaka"],"sk":["Sk","Sekhiy"],"pvr":["Pvr","Parivra"],"bj":["Bj","Buddhajayanttripiakagranthaml 25012531 (19571989)"],"finot":["Finot","Finot"],"tv":["Tv","Theravda"],"tib":["Tib",""],"pp":["Pp","Puggalapaatti"],"dq":["D","Derge/Peking editions"],"bj-a":[" Bj A","Buddhajayanttripiakagranthaml Atthakath)"],"si":["Si","Sinhala Tipiaka 2501 (1957)"],"pts2":["PTS 2","Pali Text Society 2nd ed. 25172541 (19741998)"],"ru":["Ru","Russian"],"pc":["Pc","Pcittiy"],"gf":["Gandh","Gndhr fragments"],"de":["De","German"],"su":["Su","Suttas"],"conc":["Conc.","Conclusion"],"da":["DA","Drghgama"],"oa":["T","Other gama Stras"],"lzh":["lZh","Chinese"],"cp":["Cp","Cariypiaka"],"c-a":["C-A","Chahasagti Piaka Atthakath"],"sa":["SA","Sayuktgama (1st)"],"s3":["S 3","Symarahassa Tepiaka 2538 (1995)"],"pe":["Pe","Peakopadesa"],"cases":["cases","cases"],"svbh":["Svbh",""],"mr":["Mr","Maramma Tipiaka 2541 (1997)"],"sbv":["Sbv","Saghabhedavastu"],"km":["Km","Phratraipiakapi 25012512 (19581969)"],"np":["NP","Nissaggiy Pcittiy"],"t1670a":["T 1670 A","Ngasena Bhiku Stra (1st)"],"bi":["Bi","Bhikkhun"],"sa-2":["SA-2","Sayuktgama (2nd)"],"ap":["Ap","padna"],"dt":["Dt","Dhtukath"],"sv":["Sv","Sarvstivda"],"zh":["Zh","Chinese"],"sht":["SHT","SHT fragments"],"mn":["MN","Majjhima Nikya"],"kn":["KN","Khuddaka Nikya"],"divy":["Divy","Divyvadna"],"pi":["Pi","Pli"],"ab":["Ab","Abhidhamma"],"snp":["Snp","Sutta Nipta"],"sn":["SN","Sayutta Nikya"],"bu":["Bu","Bhikkhu"],"thi-ap":["Th Ap","Therapadna"],"s2":["S 2","Symarahassa Tepiaka 24692471 (19261928)"],"ko":["Ko","Korean"],"mi":["Mi","Mahsaka"],"s-a":["S-A","Symarahassa Tepiaka Atthakath"],"kd":["Kd","Khandhaka"],"vi":["Vi","Vinaya"],"vagga":["Vagga","Vagga"],"pn":["Pn","Pakiaka"],"tf":["Tf","Turfan"],"pj":["Pj","Prjika"],"ya":["Ya","Yamaka"],"sa-3":["SA-3","Sayuktgama (3rd)"],"pts-a":["PTS-A","Pali Text Society Atthakath"],"mvu":["Mvu","Mahvastu"],"lo":["Lo","Lokuttaravda"],"ay":["Ay","Aniyata"],"c2":["C2","Chahasagti Piaka 2nd ed. 25002506 (19561962)"],"mnd":["Mnd","Mahniddesa"],"mbt":["Mbt","Mahvyutpatti"],"an":["AN","Aguttara Nikya"],"t1670b":["T 1670 B","Ngasena Bhiku Stra (2nd)"],"cnd":["Cnd","Caniddesa"],"my":["My","Burmese"],"uv":["UV","Udnavarga"],"es":["Es","Spanish"],"thag":["Thag","Theragth"],"fr":["Fr","French"],"vn":["Vn","Vietnamese"],"mv":["Mv",""],"dg":["Dg","Dharmaguptaka"],"upali":["Upali","Upliparipcch"],"pd":["Pd","Pidesany"],"kf":["Khot","Khotanese fragments"],"ma":["MA","Madhyamgama"],"ka":["Ka","Kyapya"],"thig":["Thg","Thergth"],"c1":["C1","Chahasagti Piaka 24962499 (19521955)"],"ps":["Ps","Paisambhidmagga"],"vv":["Vv","Vimnavatthu"],"dhp":["Dhp","Dhammapada"],"gd":["Gd","Garudhamma"],"sf":["SF","Other Fragments"],"gr":["Gr","Gndhr"],"pf":["Prak","Prkrit fragments"],"ss":["Ss","Saghdises"],"t":["T","Taish"],"ud":["Ud","Udna"],"en":["En","English"],"ne":["Ne","Netti"],"avs":["Avs","Avadnaataka"],"pm":["Pm","Ptimokkha"],"kv":["Kv","Kathvatthu"],"up":["Up","Upyik"],"bo":["Bo","Tibetan"],"bf":["Bf","Bajaur"],"s1":["S 1","Chulachomklao Pi Tipiaka 2436 (1893)"],"arv":["Arv","Arthavinicaya"],"mg":["Mg","Mahsaghika"],"it":["It","Itivuttaka"],"skt":["Skt","Sanskrit"],"dn":["DN","Dgha Nikya"],"mil":["Mil","Milindapaha"],"ds":["Ds","Dhammasaga"],"c3":["C3","Chahasagti Piaka (1997)"],"lal":["Lal","Lalitavistara"],"bv":["Bv","Buddhavasa"],"maku":[" Maku","Mahmakurjvidylai 2466 (1923)"],"pt":["Pt","Pahna"],"pv":["Pv","Petavatthu"],"vb":["Vb","Vibhaga"],"asc":["Asc","Abhisamcrika"],"as":["As","Adhikaraasamath"],"tha-ap":["Tha Ap","Therpadna"],"ea-2":["EA2 [T 150A]","Ekottarikgama (2nd)"],"ea":["EA","Ekottarikgama (1st)"],"ug":["Ug","Uighur"]}
sc.text={}
if(document.getElementById('text')){sc.text.uid=window.location.pathname.split('/').slice(-1)[0];sc.text.acro=sc.util.uidToAcro(sc.text.uid);}
$.fn.eachText=function(callback){function iterNodes(node){if(node.nodeType==3){var result=callback(node.nodeValue,node);if(result!==undefined){node.nodeValue=result;}}else{Array.prototype.forEach.call(node.childNodes,iterNodes);}}
this.each(function(){iterNodes(this)});return this}
$.fn.textNodes=function(filter){var result=[];function iterNodes(node){if(filter&&$.proxy(filter,node)(node)==false)return
if(node.nodeType==3){result.push(node);}else{Array.prototype.forEach.call(node.childNodes,iterNodes);}}
this.each(function(){iterNodes(this)});return $(result)}
sc.text_selection=(function(){"use strict";if($('#text').length==0)return
var elementSelector='article > *:not(div),\
                           article > div.hgroup,\
                           article > div:not(.hgroup) > *',$elements=$(elementSelector),valid_char_rex=/[^ \n.,?!]/g,ignoreClasses,$linkElement=$('[name=text-selection-url]')
function nodeFilter(){if($(this).is(ignoreClasses)){return false}
if(this.nodeType==3&&/^\s*[]+\s*$/.test(this.nodeValue)){return false}
return true}
function onReady(){var a=['.deets'];for(var k in(sc.classes.margin)){a.push('.'+k);}
ignoreClasses=','.join(a);highlightSelection();$(document.body).on('mouseup',updateLink);var clip=new ZeroClipboard($linkElement.parent().find('button')[0],{moviePath:"/js/vendor/ZeroClipboard-1.2.3.swf",hoverClass:"hover",activeClass:"active"});clip.on('load',function(client){client.on('complete',function(client,args){});});clip.on('dataRequested',function(client,args){var text=$linkElement.val();client.setText(text);console.log('Set text');});$linkElement.on('click',function(){$linkElement.select();});$linkElement.parent().find('button, input').attr('disabled','disabled');}
function highlightSelection(){var parts=window.location.pathname.split('/');if(parts.length<4)return
var targets=parts[3],firstTarget=null;targets.split('+').forEach(function(target){var m=/(\d+)(?:(?:\.(\d+))?-(\d+)(?:\.(\d+))?)?/.exec(target),startId=+m[1],endId=+m[3],startOffset=+m[2],endOffset=+m[4],startedHl=false,wasStartedHl=false,doneHl=false;if(isNaN(endId)){endId=startId}
if(isNaN(startOffset)||startOffset==0){startOffset=1}
if(isNaN(endOffset)){endOffset=9001}
console.log(startId,endId,startOffset,endOffset);for(var index=startId;index<=endId;++index){var targetElement=$elements[index];firstTarget=firstTarget||targetElement;if(index!=startId&&index!=endId)
{$(targetElement).textNodes(nodeFilter).wrap('<span class="marked">');continue}
var pos=0;$(targetElement).textNodes(nodeFilter).each(function(i,node){var text=node.nodeValue;if(index==endId&&pos>=endOffset){return}
wasStartedHl=startedHl;var startedAdded=false;var newText=text.replace(valid_char_rex,function(m){var result=m[0];pos+=1;if(index==endId&&pos==endOffset){result=result+'__HLEND__';doneHl=true;}
if(index==startId&&pos==startOffset){result='__HLSTART__'+result;startedAdded=true;startedHl=true;}
return result});if(startedHl){if(!startedAdded){newText='__HLSTART__'+newText;}
if(!doneHl){newText=newText+'__HLEND__';}}
node.nodeValue=newText});var html=targetElement.innerHTML;html=html.replace(/__HLSTART__/g,'<span class="marked">').replace(/__HLEND__/g,'</span>');targetElement.innerHTML=html;var marked=$(targetElement).find('.marked');marked.first().addClass('first-marked');marked.last().addClass('last-marked');}
for(var index=startId;index<=endId;++index){var marked=$($elements[index]).find('.marked');marked.first().addClass('first-marked');marked.last().addClass('last-marked');}});if(firstTarget){document.body.scrollTop=$(firstTarget).offset().top-40;}}
function createReferenceChrome(){var selection=window.getSelection(),range=selection.getRangeAt(),startNode=range.startContainer,endNode=range.endContainer,startParent=$(startNode).parents(elementSelector),endParent=$(endNode).parents(elementSelector),startOffset=range.startOffset,endOffset=range.endOffset;var range=selection.getRangeAt();if($(range.commonAncestorContainer).parents('#text').length==0){return{error:'A reference could not be created as '+'the selection is not a part of the text'}}
var result=[],start_id=$elements.index(startParent),end_id=$elements.index(endParent);for(var index=start_id;index<=end_id;++index){if(index>start_id&&index<end_id){result.push({index:index})
continue}
var parent=$elements[index],char_start=null,char_end=null,valid_char_count=0;if(index>start_id){char_start=0;}
if(index<end_id){char_end=$(parent).text().match(valid_char_rex).length;}
$(parent).textNodes(nodeFilter).each(function(i,node){var text=node.nodeValue;if(node==startNode||node==endNode){if(char_end!==null&&char_start!==null)return
var all_char_count=0;Array.prototype.forEach.call(text,function(char){if(char_end!==null&&char_start!==null)return
if(char.search(valid_char_rex)==0){valid_char_count+=1;if(node==startNode){if(all_char_count==startOffset){char_start=valid_char_count;}}
if(node==endNode){if(all_char_count>=endOffset){char_end=valid_char_count-1;}}}
all_char_count+=1;});}else{var m=text.match(valid_char_rex);if(m){valid_char_count+=m.length;}}});result.push({index:index,char_start:char_start,char_end:char_end})}
return result;}
function createReference(chars){var selection=window.getSelection(),startNode=selection.anchorNode,endNode=selection.focusNode,startParent=$(startNode).parents(elementSelector),endParent=$(endNode).parents(elementSelector),startOffset=selection.anchorOffset,endOffset=selection.focusOffset;var range=selection.getRangeAt();if($(range.commonAncestorContainer).parents('#text').length==0){return{error:'A reference could not be created as '+'the selection is not a part of the text'}}
if(startParent.length==0||endParent.length==0){return{'error':'A reference could not be created as '+'the selection is not a part of the text'}}
var result=[],start_id=$elements.index(startParent),end_id=$elements.index(endParent);if(start_id>=end_id){var diff=null;if(start_id>end_id){var tmp=end_id;end_id=start_id;start_id=tmp;tmp=startParent;startParent=endParent;endParent=tmp;diff=-1;}else{var nodes=$($elements.toArray().slice(start_id,end_id+1)).textNodes();diff=nodes.index(endNode)-nodes.index(startNode);}
if(diff>0){}else if((diff<0)||(startOffset>endOffset)){tmp=startNode;startNode=endNode
endNode=tmp;tmp=startOffset;startOffset=endOffset;endOffset=tmp;}}
for(var index=start_id;index<=end_id;++index){if(index>start_id&&index<end_id){result.append({index:index})
continue}
var parent=$elements[index],char_start=null,char_end=null,valid_char_count=0;if(index>start_id){char_start=0;}
if(index<end_id){char_end=$(parent).text().match(valid_char_rex).length;}
$(parent).textNodes().each(function(i,node){var text=node.nodeValue;if(node==startNode||node==endNode){if(char_end!==null&&char_start!==null)return
var all_char_count=0;Array.prototype.forEach.call(text,function(char){if(char_end!==null&&char_start!==null)return
if(char.search(valid_char_rex)==0){valid_char_count+=1;console.log(char,valid_char_count,all_char_count);if(node==startNode){if(all_char_count==startOffset){char_start=valid_char_count;console.log('Start: ',char,char_start);}}
if(node==endNode){if(all_char_count>=endOffset){char_end=valid_char_count-1;console.log('End: ',char,char_end);}}}
all_char_count+=1;});}else{valid_char_count+=text.match(valid_char_rex).length;}});result.push({index:index,char_start:char_start,char_end:char_end})}
return result;}
function updateLink(){if(window.getSelection().type!='Range')return
var target=null;var result=createReferenceChrome();if('error'in result){return}
var start=result.slice(0,1)[0],end=result.slice(-1)[0];if(end.char_end==1){end.index-=1;end.char_end=null;}
if(start.char_start==1&&end.char_end==null){if(start.index==end.index){target=start.index;}}
if(target==null){var targetStart=start.index;if(start.char_start>1||end.char_end!=null){targetStart+='.'+start.char_start;}
var targetEnd=end.index;if(end.char_end!=null){targetEnd+='.'+end.char_end;}
console.log(targetStart,targetEnd)
target='{}-{}'.format(targetStart,targetEnd);}
var lang_uid=$('#text').attr('lang'),uid=$('.sutta').attr('id');$linkElement.val('{}/{}/{}/{}'.format(window.location.origin,lang_uid,uid,target));$linkElement.parent().find('button, input').removeAttr('disabled');}
$(document).one('ready',onReady);return{highlightSelection:highlightSelection,createReference:createReferenceChrome,nodeFilter:nodeFilter}})();sc.search={search_element:$('#page-header-search > input'),lastXHR:null,oldMain:null,dropDown:$(),latestSearchTimeoutId:null,init:function(){sc.search.search_element.on('keyup focus',sc.search.handleSearch);},clear:function(){this.dropDown.empty();},handleSearch:function(e){var self=sc.search,query=e.target.value;if(sc.search.lastXHR){sc.search.lastXHR.abort();}
if(query.length<3){self.clear();}else{var params={'query':query,'lang':sc.intr.lang,'autocomplete':1}
var url="/search?"+$.param(params),ajax=jQuery.ajax(url,{"cache":false});ajax.done(self.done);ajax.error(self.error);sc.search.lastXHR=ajax;}},done:function(data,code,jqXHR){var self=sc.search,url=this.url;results=JSON.parse(data);console.log(results);if(self.dropDown.length==0){self.dropDown=$('<div id="autocomplete-dropdown"></div>').appendTo('header').hide().on('click','.suggestion',function(e){self.search_element.val($(e.target).text().toLowerCase()).focus();});self.search_element.on('blur',function(){self.dropDown.delay(50).slideUp();return false});}
self.dropDown.empty();if(results.total==0){self.dropDown.slideUp()
return}
var ul=$('<ul></ul>').appendTo(self.dropDown);$(results.hits).each(function(i,hit){var langs=['en','pi'];if(hit.lang!='en'&&hit.lang!='pi'){langs.push(hit.lang);}
$('<a class="suggestion"/>').appendTo($('<li/>').appendTo(ul)).text(hit.value).attr('title',hit.lang).attr('href','/search?'+$.param({query:hit.value.toLowerCase(),lang:langs.join(','),define:1,details:1}))});self.dropDown.show();},error:function(query,data,code,jqXHR){return},addCloseButton:function(e){var close=$('<div class="close-button"></div>');close.click(sc.search.restoreMain);e.prepend(close);}};sc.search.init();sc.sidebar={init:function(){var self=this;self.node=$('#sidebar');$('#toc').remove();if($('#text').length>0){$('#toc').remove();}else{return}
$('#text').find('.next, .previous, .top').remove();this.doMenu('#navigation-tab > .inner-wrap');this.doMetadata('#metadata-tab > .inner-wrap');$('#sidebar').show().easytabs({animate:false,tabs:'.tabs > li','defaultTab':'li:nth-child(2)',updateHash:false});var sidebarTab=sc.sessionState.getItem('sidebar.tab');if(sidebarTab){self.selectTab(sidebarTab)}
if(sc.sessionState.getItem('sidebar.active')){if(!self.isVisible()){self.show();self.node.addClass('fast')}}
this.node.on('easytabs:before',function(e,$clicked,$target){sc.sessionState.setItem('sidebar.tab',$target.attr('id'));sc.trackEvent($clicked.text());});$('#sidebar-dongle').on('click',function(){if(self.isVisible()){self.hide();sc.trackEvent('sidebar-hide')}else{self.show();sc.trackEvent('sidebar-show')}
return false});self.node.on('click',function(e){if(!$(e.target).is('div'))return true;self.hide();sc.trackEvent('sidebar-hide')});self.bindButtons();scState.save("clean");if(sc.sessionState.getItem('t-line-by-line')){self.toggleLineByLine();}},setReady:function(){this.node[0].style.visibility='visible';},isVisible:function(){return this.node.hasClass('active');},show:function(){this.node.addClass('active');sc.sessionState.setItem('sidebar.active',true);},hide:function(){this.node.removeClass('active');this.node.removeClass('fast');sc.sessionState.setItem('sidebar.active',false);},selectTab:function(tab){this.node.easytabs('select',tab);},bindButtons:function(){$('#text-info').click(toggleTextualInfo);$('#pali-lookup').click(_.bind(sc.piLookup.togglePaliLookup,sc.piLookup));for(f in transFuncs){$('#'+f).click(transliterateHandler);}
$('#lookup-to-lang').change(function(){sc.state.setItem('lookupToLang',$(this).val());if(sc.userPrefs.getPref("paliLookup")===true){sc.init(true);}});$('#t-line-by-line').click(this.toggleLineByLine);this.initChineseLookup();},tracking:function(e){var self=this;$('#controls-tab').on('click','.button',function(e){self.trackEvent($(e.target).attr('id')||$(e.target).text())});},trackEvent:function(label){if('ga'in window){ga('send',{hitType:'event',eventCategory:'button',eventAction:'click',eventLabel:label})}else{console.log('Event: '+label);}},toggleLineByLine:function(e){var brs=$('br.t-br');if(brs.length){brs.remove();$('#text').removeClass('line-by-line');sc.sessionState.setItem('t-line-by-line',false);}else{$('.t').before('<br class="t-br">');$('br + br.t-br').remove();$('#text').addClass('line-by-line');sc.sessionState.setItem('t-line-by-line',true);}},initChineseLookup:function(){if($('#lzh2en').length==0)return;sc.lzh2enLookup.init('#lzh2en','#text');},disableControls:function(){$('#textual-controls button').attr('disabled','disabled');},enableControls:function(){$('#textual-controls button').removeAttr('disabled');},doMenu:function(target,headings){var self=this,start=Date.now()
if(!headings){headings=$('#text').find('h2,h3,h4,h5,h6');}
var patimokkhaUid=($('section.sutta[id*=-pm]').attr('id'))
if(patimokkhaUid){headrex=/(.*)/;}else{headrex=/[ivx0-9]{1,5}[.:] \(?([^(]+)/i;}
adjustment=6
headings.each(function(){adjustment=Math.min(this.tagName.replace('H','')-1,adjustment)})
menu=['<ul>']
currentDepth=1
seen={null:1}
headings.each(function(){depth=this.tagName.replace('H','')-adjustment;while(depth>currentDepth){menu.push('<li><ul>');currentDepth++;}
while(depth<currentDepth){menu.push('</ul></li>')
currentDepth--;}
headtext=$(this).text();m=headtext.match(headrex);if(m){menutext=m[0].trim();}else{menutext=headtext;}
menutext=menutext.toTitleCase();var ref,existingAnchor=$(this).find('[id]').first();if(existingAnchor.length&&existingAnchor.text()){ref=existingAnchor.attr('id');}else{ref=$(this).attr('id');if(!ref){var asciified=(sc.util.asciify(menutext.toLowerCase())||menutext).replace(/ /g,'-'),oref=ref=asciified;while(ref in seen){ref=oref+++i;}}}
menu.push('<li><a href="#{}">{}</a></li>'.format(ref,menutext));if(existingAnchor.length){existingAnchor.attr({href:"#table-of-contents"});}else{$(this).wrapInner('<a id="{}" href="#table-of-contents" />'.format(ref))}});if(menu.length>1){menu.push('</ul>');$('<div id="table-of-contents">').append(menu.join('')).appendTo(target);}
if(patimokkhaUid){var isRule=/(?:pj|ss|an|np|pc|pd|sk|as)\d+/;$('h4').each(function(){var h4=$(this),id=h4.find('[id]').attr('id');if(!isRule.test(id))return;href='/{}_{}'.format(patimokkhaUid,id);h4.append('<a href="{}" class="details" title="Go to parallels page"></a>'.format(href))});}},doMetadata:function(target){$(target).append($('#metaarea'));var cdate=$('meta[name=cdate]').attr('content'),mdate=$('meta[name=mdate]').attr('content');if(cdate){$('#metaarea').append(('<p><em class="date-added">First Added: {}</em>'+'<em class="date-modified">Last Modified: {}</em>').format(cdate,mdate))}
this.setReady();},messageBox:{show:function(message,args){$('#message-box .message:hidden').remove();args=args||{};var msgObj=$('<div class="message"><a class="remove" onclick="$(this).parent().fadeOut(); return true;"></a>').append(message).attr('id',args.id);$('#message-box').append(msgObj);if(args.timeout){setTimeout(function(){msgObj.fadeOut();},args.timeout)}},remove:function(id){$('#message-box').find('[id="'+id+'"]').fadeOut();},clear:function(){$('#message-box > .message').fadeOut();}}};"use strict";function E(nodeName,text){var e=document.createElement(nodeName);if(text)e.appendChild(T(text));return e;}
function T(arg){return document.createTextNode(arg)}
var scMessage={messageBox:$('<div id="message_box"></div>').insertAfter("header").hide(),show:function(html,delay){this.messageBox.clearQueue();this.messageBox.html(html).show().delay(delay).fadeOut();},clear:function(){this.messageBox.clearQueue();this.messageBox.fadeOut();}}
$.ajaxSetup({cache:true});var scState={_target:(function(){if($("#text").length)return $("#text")[0];if($("#onecol").length)return $("#onecol")[0];if($("#home").length)return $("#home")[0];if($("body section").length)return $("body section")[0];throw"Error!";})(),save:function(state){if(typeof this[state]=="function")throw new Error("Invalid state name!");this[state]=this._target.innerHTML;},set:function(state,html){if(typeof this[state]=="function")throw new Error("Invalid state name!");if(!html)throw new TypeError;this._target.innerHTML=html;this.save("state")},restore:function(state){if(typeof this[state]=="function")throw new Error("Invalid state name!");if(!this[state])throw new Error("State not saved!");this._target.innerHTML=this[state];},getHTML:function(state){if(typeof this.state=="function")throw new Error("Invalid state name!");if(!this[state])throw new Error("State not saved!");return this[state];},exists:function(state){if(typeof this.state=="function")throw new Error("Invalid state name!");return!!this[state];}}
var scPersistantStorage={database:function(){if(!('localStorage'in window))return null;var lsdb={add:function(key,data,version){if(!version)version="";localStorage[key]=data;localStorage[key+'.version']=version;},get:function(key,version)
{if(!version)version="";if(localStorage[key+'.version']==version)
return localStorage[key];else
this.clear(key);},check:function(key,version)
{if(!version)version="";return(key in localStorage&&localStorage[key+'.version']==version)},remove:function(key)
{localStorage.removeItem(key);localStorage.removeItem(key+'.version');},purge:function()
{localStorage.clear();}}
return lsdb;}(),store:function(key,data,version){if(!this.database)return false;this.database.add(key,JSON.stringify(data),version);},retrive:function(key,version){if(!this.database)return false;return JSON.parse(this.database.get(key,version));},check:function(key,version){if(!this.database)return false;return this.database.check(key,version);}}
sc.piLookup={scripts:[{lang:'en',name:'English',scriptUrl:'data/pi2en-maindata-v1.js'},{lang:'de',name:'Deutsch',scriptUrl:'data/pi2de-maindata-v1.js'},{lang:'es',name:'Espaol',scriptUrl:'data/pi2es-maindata-v1.js'},{lang:'id',name:'Bahasa Indonesia',scriptUrl:'data/pi2id-maindata-v1.js'},{lang:'nl',name:'Nederlands',scriptUrl:'data/pi2nl-maindata-v1.js'}],dataByName:{},data:null,register:function(json){this.dataByName[json.script]=json.data;},init:function(){self=this;var lang=self.lang||window.localStorage.getItem('sc.piLookup.lang');if(!lang){lang=sc.intr.lang;if(!lang||_.indexOf(_.pluck(self.scripts,'lang'))==-1){lang=self.scripts[0].lang;}}
self.lang=lang;self.makeControls();$('#pali-lookup-controls').on('click','[data-lang]',_.bind(this.buttonHandler,this));},makeButton:function(script){return $('<a class="dropdown-button">').attr('data-lang',script.lang).text('Pli  '+script.name).addClass('lookup-inactive');},makeButtons:function(){self.buttons=[];_.each(self.scripts,function(script){var button=self.makeButton(script);script.button=button;self.buttons[script.lang]=button;})},makeControls:function(){var self=this,selectorId='pali-lookup-selector',$controls=$('#pali-lookup-controls');$controls.addClass("x2 button-row");$controls.empty();self.makeButtons();var $prime=$('<div class="button prime"/>').append(self.buttons[self.lang]),$selector=$('<a class="button">Lookup Language </a>'),$dropdown=$('<div class="dropdown dropdown-relative"/>').attr('id',selectorId),$dropdownPanel=$('<div class="dropdown-panel">').appendTo($dropdown);_.each(self.scripts,function(script){if(script.lang!=self.lang){$dropdownPanel.append(script.button);}});$controls.append($selector);$controls.append($prime);$controls.append($dropdown);$selector.attr('data-dropdown','#'+selectorId).dropdown('attach','#'+selectorId);},setLang:function(lang){this.lang=lang;window.localStorage.setItem('sc.piLookup.lang',lang);},buttonHandler:function(e){var $button=$(e.target),lang=$button.attr('data-lang');if(lang!=self.lang){self.setLang($button.attr('data-lang'));self.makeControls();self.togglePaliLookup(true);}else{self.togglePaliLookup();}},enablePaliLookup:function(){var self=this;$(document).on('mouseenter','span.lookup',lookupWordHandler);if(!sc.piLookup.endings){jQuery.ajax({url:sc.jsBaseUrl+'data/pi-endings-v1.js',dataType:"script",success:function(){self.endings=self.dataByName['endings'];},crossDomain:true,cache:true});}
if(!self.dataByName[self.lang]){sc.sidebar.messageBox.clear();sc.sidebar.messageBox.show("Requesting Pali Dictionary",{id:"msg-request-dict",timeout:null});jQuery.ajax({url:sc.jsBaseUrl+self.scriptsByName[self.lang].scriptUrl,dataType:"script",success:function(){self.ready();sc.sidebar.messageBox.remove("msg-request-dict");},crossDomain:true,cache:true});}else{self.ready();}},ready:function(){this.data=self.dataByName[self.lang];generateLookupMarkup();sc.sidebar.messageBox.show("The lookup dictionary is now enabled. Hover with the mouse to display the meaning.",{id:"msg-lookup-success"});$('.prime .dropdown-button').removeClass('lookup-inactive').addClass('lookup-active');},togglePaliLookup:function(force){var toggleLookupOn;if(force===undefined){toggleLookupOn=!sc.userPrefs.getPref("paliLookup");}else{toggleLookupOn=force}
sc.sidebar.messageBox.clear();sc.userPrefs.setPref("paliLookup",toggleLookupOn,true);if(toggleLookupOn==false){sc.sidebar.messageBox.show('The lookup dictionary is now disabled.',{timeout:5000});$('.prime .lookup-active').removeClass('lookup-active').addClass('lookup-inactive');}}}
sc.piLookup.scriptsByName=_.object(_.map(sc.piLookup.scripts,function(o){return[o.lang,o]}));$(document).ready(function(){sc.piLookup.init();});function transliterateHandler()
{sc.userPrefs.setPref("script",this.id,true);}
function toggleTextualInfo(force){var showTextInfo=sc.userPrefs.getPref("textInfo");showTextInfo=!showTextInfo;if(force===true){showTextInfo=true;}
else if(force===false){showTextInfo=false;}
if(showTextInfo)
{$(document.body).addClass("infomode");}else{$(document.body).removeClass("infomode");}
sc.userPrefs.setPref("textInfo",showTextInfo,false);sc.text_image.init();}
function buildTextualInformation(){var marginClasses=sc.classes.margin,idRex,idRepl;for(var marginClass in sc.classes.margin){var elements=$('.'+marginClass);if(elements.length==0){continue}
var title=sc.classes.margin[marginClass];if(title){elements.attr("title",title);}
if(marginClass=='ms'){idRex=/p_([0-9A-Z]+)_([0-9]+)/;idRepl="$1:$2";}else if(marginClass=='vnS'){idRex=/S.([iv]+),([0-9])/;idRepl="S $1 $2";}
else if(marginClass=='pts1'||marginClass=='pts2'){idRex=RegExp('^pts','i');idRepl='';}else{idRex=RegExp('^'+marginClass,'i');idRepl='';}
elements.each(function(){var id=$(this).attr('id');if(!id){return}
if($(this).text()==''){$(this).text(id.replace(/^\d+_/,'').replace(idRex,idRepl).replace(/(\d)-(\d)/,'$1\u2060\u2060$2'));}});}
var tes=$('.t, .t-linehead');if(tes.length){var uid=$('section.sutta').attr('id'),volPrefix=null;var prefixes=Object.keys(sc.volPrefixMap).sort(function(a,b){return a.length<b.length});for(var i=0;i<prefixes.length;i++){var prefix=prefixes[i];var m=RegExp('^'+prefix+'(?![a-z])\\.?(\\d*)').exec(uid);if(m){var number=m[1],volData=sc.volPrefixMap[prefix];if(typeof(volData)=='string'){volPrefix=volData;}else{for(j=0;j<volData.length;j++){var from=volData[i][0],to=volData[i][1],value=volData[i][2]
if(from<=number&&number<=to){volPrefix=value;break}}}
if(volPrefix){break}}}
if(volPrefix!==null){tes.each(function(){$(this).text(volPrefix+' '+$(this).text());});}}
$('#text a[id]:not([href])').each(function(){$(this).attr('href','#'+$(this).attr('id'));});for(var contentClass in sc.classes.content){$('.'+contentClass).attr('title',sc.classes.content[contentClass]);}}
var wordMap={};var reverseMap={};function toSyllablesInit(){$(".sutta P, .sutta H1, .sutta H2, .sutta H3").addClass('syllables');return;}
function transliterate(func){if(!wordMap[func.name])wordMap[func.name]={};if(func==toMyanmar){$('#text').attr('lang','my');}
if(!wordMap[func.name])wordMap[func.name]={};if(func==toThai){$('#text').attr('lang','th');}
if(!wordMap[func.name])wordMap[func.name]={};if(func==toSinhala){$('#text').attr('lang','si');}
if(!wordMap[func.name])wordMap[func.name]={};if(func==toDevar){$('#text').attr('lang','hi');}
else{$('#text').attr('lang','pi');}
if(func==toSyllables){toSyllablesInit();$('.syllables').each(function(){toSyllablesIteratively(this)});return;}
var classes=$(".sutta P, .sutta H1, .sutta H2, .sutta H3")
for(var i=0;i<classes.length;i++){convertIteratively(classes[i],func);}
if(func==toMyanmar){var evam=$('#text .evam')[0];if(evam){var textNode=evam.nextSibling;if(textNode){var text=textNode.textContent;text=text.replace(/^\s+/,'');textNode.textContent=text;}}}}
function convertIteratively(startNode,func){var node,it=new Iter(startNode,'text'),type,name,text;while(node=it.next())
{if(node.parentNode.nodeName=='A')
if(node.parentNode.parentNode.nodeName[0]!='H')
continue;text=node.nodeValue.replace(/\&nbsp;/g,' ');;if(!(/^\s*$/).test(text)){if(func!=toRoman&&func!=toSyllables){node.nodeValue=transliterateString(text,func);}}}
return}
function toRoman(input){return input}
var anychar=/[aiueokgcjtdnpbmyrlvsh]/i;var syllabousRex=(function(){var cons="(?:br|[kgcjtdbp]h|[kgcjtdp](?!h)|[mnyrlvsh]|b(?![rh]))";var vowel="(?:[aiueo])";var other="[^aiueokgcjtdnpbmyrlvsh]";return RegExp(cons+'*'+vowel+'(?:'+cons+'(?!'+vowel+'))?'+'|'+other,'gi')
var other="[^aiueokgcjtdnpbmyrlvsh]";var cons="[kgcjtdnpbmyrlvsh]"
return RegExp('('+cons+'*[aiueo]('+cons+'(?='+other+')|[yrlvsh](?=h)|'+cons+'(?!h)'+'(?='+cons+'))?'+')|('+other+'+)','gi');})();function toSyllables(input){var out="";var parts=input.match(syllabousRex);if(parts)
for(var i=0;i<parts.length;i++)
{if(anychar.test(parts[i]))
{if((/[aiu]$/i).test(parts[i])){out+=parts[i]}
else{out+="<u>"+parts[i]+"</u>"};if(parts[i+1]&&(/[aiueo]/i).test(parts[i+1]))
out+=syllSpacer;}else
out+=parts[i];}
return out}
function toSyllablesIteratively(node){var it=new Iter(node,'text'),input,i,parts,out,proxy;while(node=it.next())
{parent=node.parentNode;if(parent.nodeName=='A')continue;input=node.nodeValue.replace(//g,'');out=toSyllables(input)
proxy=E('span')
parent.insertBefore(proxy,node);node.nodeValue='';proxy.outerHTML=out;}}
function transliterateWord(word,func){var script=func.name
if(func.name=='toSyllables')
return func(word);word=word.toLowerCase().replace(//g,'');if(!wordMap[script][word]){wordMap[script][word]=func(word)
reverseMap[wordMap[script][word]]=word}
return wordMap[script][word];}
function transliterateString(input,func){var splitRex=RegExp('[^aiueokgcjtdnpbmyrlvsh]+|[aiueokgcjtdnpbmyrlvsh]+','gi');var output="";input=input.replace(/\&quot;/g,'`').toLowerCase();var parts=input.match(splitRex);for(var i in parts){var word=parts[i];if(anychar.test(word))
{output+=transliterateWord(word,func)}
else{output+=parts[i];}}
output=output.replace(/\`+/g,'"');return output;}
function toSinhala(l){l=l.toLowerCase()+" ";var m={a:"","":"",i:"","":"",u:"","":"",e:"",o:""};var b={"":"",i:"","":"",u:"","":"",e:"",o:"","":"",k:"",g:"","":"",c:"",j:"","":"","":"","":"","":"",t:"",d:"",n:"",p:"",b:"",m:"",y:"",r:"",l:"","":"",v:"",s:"",h:""};var j={kh:"",gh:"",ch:"",jh:"","h":"","h":"",th:"",dh:"",ph:"",bh:"","j":"","":"",nd:"",mb:"",rg:""};var a={k:"",g:"","":"",c:"",j:"","":"","":"","":"","":"",t:"",d:"",n:"",p:"",b:"",m:"",y:"",r:"",l:"","":"",v:"",s:"",h:""};var k,g,f,e,d;var c="";var h=0;while(h<l.length){k=l.charAt(h-2);g=l.charAt(h-1);f=l.charAt(h);e=l.charAt(h+1);d=l.charAt(h+2);if(m[f]){if(h==0||g=="a"){c+=m[f]}else{if(f!="a"){c+=b[f]}}h++}else{if(j[f+e]){c+=j[f+e];h+=2;if(a[d]){c+=""}}else{if(b[f]&&f!="a"){c+=b[f];h++;if(a[e]&&f!=""){c+=""}}else{if(!b[f]){if(a[g]||(g=="h"&&a[k])){c+=""}c+=f;h++;if(m[e]){c+=m[e];h++}}else{h++}}}}}if(a[f]){c+=""}c=c.replace(//g,"");c=c.replace(//g,"");c=c.replace(//g,"");c=c.replace(//g,"");c=c.replace(//g,"");c=c.replace(/\`+/g,'"');return c.slice(0,-1)}
function toMyanmar(k){k=k.toLowerCase()+" ";var m={a:"",i:"",u:"","":"","":"","":"",e:"",o:""};var l={i:"","":"",u:"","":"",e:"","":"",k:"",kh:"",g:"",gh:"","":"",c:"",ch:"",j:"",jh:"","":"","":"","h":"","":"","h":"","":"",t:"",th:"",d:"",dh:"",n:"",p:"",ph:"",b:"",bh:"",m:"",y:"",r:"",l:"","":"",v:"",s:"",h:""};var a={k:"",g:"","":"",c:"",j:"","":"","":"","":"","":"",t:"",d:"",n:"",p:"",b:"",m:"",y:"",r:"",l:"","":"",v:"",s:"",h:""};var n={kh:"1",g:"1",d:"1",dh:"1",p:"1",v:"1"};var j,f,e,d,c;var b="";var g=0;k=k.replace(/\&quot;/g,"`");var h=false;while(g<k.length){j=k.charAt(g-2);f=k.charAt(g-1);e=k.charAt(g);d=k.charAt(g+1);c=k.charAt(g+2);if(m[e]){if(g==0||f=="a"){b+=m[e]}else{if(e==""){if(n[h]){b+=""}else{b+=""}}else{if(e=="o"){if(n[h]){b+=""}else{b+=""}}else{if(e!="a"){b+=l[e]}}}}g++;h=false}else{if(l[e+d]&&d=="h"){b+=l[e+d];if(c!="y"&&!h){h=e+d}if(a[c]){b+=""}g+=2}else{if(l[e]&&e!="a"){b+=l[e];g++;if(d!="y"&&!h){h=e}if(a[d]&&e!=""){b+=""}}else{if(!l[e]){b+=e;g++;if(m[d]){if(m[d+c]){b+=m[d+c];g+=2}else{b+=m[d];g++}}h=false}else{h=false;g++}}}}}b=b.replace(//g,"");b=b.replace(//g,"");b=b.replace(//g,"");b=b.replace(//g,"");b=b.replace(//g,"");b=b.replace(//g,"");b=b.replace(//g,"");return b.slice(0,-1)}
function toDevar(l){l=l.toLowerCase()+" ";var m={a:" ",i:" ",u:" ","":" ","":" ","":" ",e:" ",o:" "};var n={"":"",i:"","":"",u:"","":"",e:"",o:"","":"",k:"",kh:"",g:"",gh:"","":"",c:"",ch:"",j:"",jh:"","":"","":"","h":"","":"","h":"","":"",t:"",th:"",d:"",dh:"",n:"",p:"",ph:"",b:"",bh:"",m:"",y:"",r:"",l:"","":"",v:"",s:"",h:""};var k,h,g,f,e,d,b;var c="";var a=0;var j=0;l=l.replace(/\&quot;/g,"`");while(j<l.length){k=l.charAt(j-2);h=l.charAt(j-1);g=l.charAt(j);f=l.charAt(j+1);e=l.charAt(j+2);d=l.charAt(j+3);b=l.charAt(j+4);if(j==0&&m[g]){c+=m[g];j+=1}else{if(f=="h"&&n[g+f]){c+=n[g+f];if(e&&!m[e]&&f!=""){c+=""}j+=2}else{if(n[g]){c+=n[g];if(f&&!m[f]&&!m[g]&&g!=""){c+=""}j++}else{if(g!="a"){if(a[h]||(h=="h"&&a[k])){c+=""}c+=g;j++;if(m[f]){c+=m[f];j++}}else{j++}}}}}if(a[g]){c+=""}c=c.replace(/\`+/g,'"');return c.slice(0,-1)}
function toThai(m){m=m.toLowerCase()+" ";var n={a:"1","":"1",i:"1","":"1","i":"1",u:"1","":"1",e:"2",o:"2"};var j={a:"","":"",i:"","":"","i":"",u:"","":"",e:"",o:"","":"",k:"",kh:"",g:"",gh:"","":"",c:"",ch:"",j:"",jh:"","":"","":"","h":"","":"","h":"","":"",t:"",th:"",d:"",dh:"",n:"",p:"",ph:"",b:"",bh:"",m:"",y:"",r:"",l:"","":"",v:"",s:"",h:""};var a={k:"1",g:"1","":"1",c:"1",j:"1","":"1","":"1","":"1","":"1",t:"1",d:"1",n:"1",p:"1",b:"1",m:"1",y:"1",r:"1",l:"1","":"1",v:"1",s:"1",h:"1"};var l,h,g,f,e,d,b;var c="";var k=0;m=m.replace(/\&quot;/g,"`");while(k<m.length){l=m.charAt(k-2);h=m.charAt(k-1);g=m.charAt(k);f=m.charAt(k+1);e=m.charAt(k+2);d=m.charAt(k+3);b=m.charAt(k+4);if(n[g]){if(g=="o"||g=="e"){c+=j[g]+j.a;k++}else{if(k==0){c+=j.a}if(g=="i"&&f==""){c+=j[g+f];k++}else{if(g!="a"){c+=j[g]}}k++}}else{if(j[g+f]&&f=="h"){if(e=="o"||e=="e"){c+=j[e];k++}c+=j[g+f];if(a[e]){c+=""}k=k+2}else{if(j[g]&&g!="a"){if(f=="o"||f=="e"){c+=j[f];k++}c+=j[g];if(a[f]&&g!=""){c+=""}k++}else{if(!j[g]){c+=g;if(a[h]||(h=="h"&&a[l])){c+=""}k++;if(f=="o"||f=="e"){c+=j[f];k++}if(n[f]){c+=j.a}}else{k++}}}}}if(a[g]){c+=""}c=c.replace(/\`+/g,'"');return c.slice(0,-1);};function generateLookupMarkup(){var classes=".sutta P, .sutta H1, .sutta H2, .sutta H3"
generateMarkupCallback.nodes=$(classes).toArray();generateMarkupCallback.start=Date.now();sc.sidebar.disableControls()
generateMarkupCallback();return;}
function generateMarkupCallback(){var node=generateMarkupCallback.nodes.shift();if(!node){sc.sidebar.enableControls();return}
toLookupMarkup(node);setTimeout(generateMarkupCallback,5);}
var paliRex=/([aiueokgcjtdnpbmyrlvsh]+)/i;var splitRex=/([^ \n,. :;?!"'-]+)/;function toLookupMarkup(startNode)
{var parts,i,out="",proxy,node;var it=new Iter(startNode,'text');while(node=it.next())if(node.nodeValue){if(node.parentNode.nodeName=='A')
if(node.parentNode.parentNode.nodeName[0]!='H')
continue;out="";parts=node.nodeValue.split(splitRex);for(i=0;i<parts.length;i++){if(i%2==1){var word=parts[i]
if(sc.mode.translitFunc.name!='toRoman')
word=transliterateWord(word,sc.mode.translitFunc);if(node.parentNode.nodeName!='A')
out+='<span class="lookup">'+word+'</span>'
else
out+=word}else{out+=parts[i];}}
proxy=E('span');node.parentNode.replaceChild(proxy,node);proxy.outerHTML=out;}}
var G_uniRegExpNSG=/[   :;?!,.]+/gi;function lookupWordHandler(event){if(!sc.userPrefs.getPref("paliLookup"))return;if(!'paliDictionary'in window)return;if($(this).children().is("span.meaning"))return;var word=$(this).text().toLowerCase().trim();word=word.replace(//g,'').replace(RegExp(syllSpacer,'g'),'');if(reverseMap[word]){meaning+=word+" : ";word=reverseMap[word];}
word=word.replace(/g/g,'g').replace(/k/g,'k').replace(//g,'').replace(//g,'');var meaning=lookupWord(word);if(meaning){var textBox=$('<span class="meaning">'+meaning+'</span>');$(this).append(textBox);sc.formatter.rePosition(textBox);}}
function lookupWord(word){var allMatches=[];var isTi=false;if(word.match(/[]ti$/)){isTi=true;word=word.replace(/[]ti$/,"");}
word=word.replace(/[]/g,"");var original=word;var unword=null;var m=matchComplete(word,{"ti":isTi});if(!m||m.length==0){if(word.search(/^an|^a(.)\1/)!=-1)unword=word.substring(2,word.length)
else if(word.search(/^a/)!=-1)unword=word.substring(1,word.length);if(unword){m=matchComplete(unword,{"ti":isTi});if(m&&m.length>0)
{allMatches.push({"base":"an","meaning":"non/not"});}}}
if(m&&m.length>0)
{allMatches=allMatches.concat(m);}
if(allMatches.length==0)
{var m=matchPartial(word);if(unword)
{var unm=matchPartial(unword);if((unm&&!m)||(unm&&m&&unm.base.length>m.base.length)){m=unm;allMatches.push({"base":"an","meaning":"non/not"});}}
var foundComplete=false;while(m&&!foundComplete)
{allMatches=allMatches.concat(m);var leftover=m.leftover;var sandhi=m.base[m.base.length-1];var firstchar=leftover[0];leftover=leftover.substring(1,leftover.length);var starts=[firstchar,"",sandhi+firstchar];var vowels=['a','','i','','u','','o','e'];if(sandhi=='a'||sandhi=='i'||sandhi=='u')vowels=['a','i','u'];for(i in vowels)starts.push(vowels[i]+firstchar);var foundComplete=false;for(i in starts)
{m=matchComplete(starts[i]+leftover,{"ti":isTi});if(m&&m.length>0){allMatches=allMatches.concat(m);foundComplete=true;break;}
m=matchPartial(starts[i]+leftover);if(m)break;}
if(!m)
{var base=firstchar+leftover;if(base!=''){allMatches.push({"base":base,"meaning":"?"});}
break;}}}
var out="";if(allMatches.length==0)
{allMatches.push({"base":original,"meaning":"?"});}
if(isTi)allMatches.push({"base":"iti","meaning":"endquote"});for(var i in allMatches){var href="http://suttacentral.net/search?lang=&define=&query="+allMatches[i].base;out+='<a href="'+href+'">'+allMatches[i].base+'</a>: '+allMatches[i].meaning;if(i!=allMatches.length-1)
{out+=" + ";}}
return out;}
function matchComplete(word,args){var matches=[];for(var pi=0;pi<2;pi++)
for(var vy=0;vy<2;vy++)
for(var ti=0;ti<2;ti++)
{var wordp=word;if(ti&&args.ti==true)
{wordp=wordp.replace(/$/,"i").replace(/$/,"i").replace(/$/,"i").replace(/n$/,"").replace(/n$/,"");}
if(pi)
{if(wordp.search(/pi$/)==-1)continue;wordp=wordp.replace(/pi$/,"");}
if(vy)
{if(wordp.match(/vy/))wordp=wordp.replace(/vy/g,'by')
else if(wordp.match(/by/))wordp=wordp.replace(/by/g,'vy')
else continue;}
var m=exactMatch(wordp)||fuzzyMatch(wordp);if(m){matches.push(m);if(pi)matches.push({"base":"pi","meaning":"too"});return matches;}}
return null;}
function matchPartial(word,maxlength){for(var vy=0;vy<2;vy++)
{var wordp=word;if(vy)
{if(wordp.match(/vy/))wordp=wordp.replace(/vy/g,'by')
else if(wordp.match(/by/))wordp=wordp.replace(/by/g,'vy')
else continue;}
if(!maxlength)maxlength=4;for(var i=0;i<word.length;i++){var part=word.substring(0,word.length-i);if(part.length<maxlength)break;var target=sc.piLookup.data[part]
if(typeof(target)=='object'){var meaning=target[1];if(meaning===undefined){meaning=target[0];}
return{"base":part,"meaning":meaning,"leftover":word.substring(word.length-i,word.length)}}}}}
function exactMatch(word)
{var target=sc.piLookup.data[word];if(typeof(target)=='object'){if(target[1]===undefined){var meaning=target[0];}else{var meaning=target[1]+' ('+target[0]+')';}
return{"base":word,"meaning":meaning};}
return null;}
function fuzzyMatch(word){var end=sc.piLookup.endings;for(var i=0;i<end.length;i++){if(word.length>end[i][2]&&word.substring(word.length-end[i][0].length,word.length)===end[i][0]){var orig=word.substring(0,word.length-end[i][0].length+end[i][1])+end[i][3];var target=sc.piLookup.data[orig];if(typeof(target)=='object'){if(target[1]===undefined){var meaning=target[0];}else{var meaning=target[1]+' ('+target[0]+')';}
return{"base":orig,"meaning":meaning};}}}
return null;}
function _IterPermissions(permissables){if(!permissables)
return undefined;var tmp=[];if(permissables.indexOf('element')!=-1)
tmp.push(1);if(permissables.indexOf('text')!=-1)
tmp.push(3);if(permissables.indexOf('comment')!=-1)
tmp.push(8);if(permissables.indexOf('document')!=-1)
tmp.push(9);if(tmp.length>0)
return tmp;}
function Iter(node,permissables){this.permissables=_IterPermissions(permissables);this.next_node=node;}
Iter.prototype={next_node:undefined,stack:[],permissables:null,next:function(){var current=this.next_node;if(current===undefined)return undefined;if(current.firstChild){this.stack.push(this.next_node);this.next_node=this.next_node.firstChild;}
else if(this.next_node.nextSibling){this.next_node=this.next_node.nextSibling;}
else{while(this.stack.length>0)
{var back=this.stack.pop();if(back.nextSibling)
{this.next_node=back.nextSibling;break;}}
if(this.stack.length==0)this.next_node=undefined;}
if(!this.permissables)
return current;if(this.permissables.indexOf(current.nodeType)!=-1)
return current;return this.next()}}
function nextInOrderByType(node,nodeType){while(true){var node=nextInOrder(node);if(node===undefined)return
if(node.nodeType==nodeType){return node}}}
function nextInOrderBySelector(node,selector){while(true){var node=nextInOrder(node);if(node===undefined)return
if($(node).is(selector))return node;}}
function nextInOrder(node){if(node.firstChild){node=node.firstChild;}
else if(node.nextSibling){node=node.nextSibling;}
else{while(true){node=node.parentNode;if(!node){return undefined;}
if(node.nextSibling){node=node.nextSibling;break;}}}
return node}
function previousInOrder(node,permissables){if(node.previousSibling){node=node.previousSibling;while(node.lastChild)
node=node.lastChild;}else if(node.parentNode){node=node.parentNode;}else{return undefined;}
if(!permissables)
return node;if(typeof permissables=='number'){if(node.nodeType==permissables)
return node;}
else if(typeof permissables=='string'){if($(node).is(permissables))return node;}
else if(permissables.indexOf(node.nodeType)!=-1)
return node;return previousInOrder(node,permissables);}
var sc=window.sc||{}
sc.classes={margin:{"as":"Page numbers in Yamada, 1972.","bl":"(Not defined in GRETIL source.)","bm":"Paragraph numbers in Bhikkhu Mettiko.","bn":"Paragraph numbers in Bhikkhu adassana.","bps":"Buddhist Publication Society","bjt":"Buddha Jayanthi Tipitaka","d-vp":"Vol/page of the Derge edition","eno89":"Paragraph numbers in Enomoto, 1989.","es":"Paragraph numbers in Ekkehard Sa.","fuk03":"Page numbers in Fukita, 2003","fol":"Folio number in the manuscript.","gatha-number":"Verse number.","gatn":"","gbm":"Section numbers in Gilgit Buddhist Manscripts.","gno78":"Paragraph numbers in Gnoli, 1978.","har04":"Paragraph number in Hartmann, 2004.","hh":"Paragraph numbers in Hellmuth Hecker.","hoe16":"Verse numbers in Hoernle, 1916.","hos89a":"Paragraph numbers in Hosoda, 1989, Sanskrit Fragments from the Parivrjakasayukta of the Sayuktgama I.","hos89b":"Paragraph numbers in Hosoda, 1989, Sanskrit Fragments from the Parivrjakasayukta of the Sayuktgama II.","hos91":"Paragraph numbers in Hosoda, 1991.","hs":"(Not defined in GRETIL source.)","jd":"Paragraph numbers in Dr. Julius Dutoit.","jsk":"Paragraph numbers in J.S. Krger.","kel":"Paragraph numbers in Kelly, Sawyer, and Yareham.","ks":"Paragraph numbers in Karl Seidenstcker.","mat85":"Paragraph numbers in Matsumura, 1985.","mat88":"Paragraph numbers for Mahsudaranastra in Matsumura, 1988.","mit57":"Paragraph numbers in Mittal, 1957.","ms":"Mahsagti paragraph number.","mt":"Paragraph numbers in Maitrimurti / Trtow.","ms-pa":"","nm":"Paragraph numbers in Nynatiloka Mahthera.","np":"Paragraph numbers in Nynaponika Mahthera.","of":"Paragraph numbers in Otto Franke, 1913.","pl":"Paragraph numbers in Peter van Loosbroek.","pts":"Pali Text Society vol/page number.","pts1":"Page number of Pali Text Society, 1st edition.","pts2":"Page number of Pali Text Society, 2nd edition.","pts-cs":"Chapter and section of Pali Text Society editions.","pts-vp-en":"Vol/page of the Pali Text Society translation.","pts-vp-pi":"Vol/page of the Pali Text Society Pali edition.","pts_pn":"Pali Text Society vol/page number.","pts-p-pi":"Pali Text Society page number for the Pali text.","roth":"Paragraph numbers in Roth, 1970.","rs-vp":"Volume and page numbers in Rahula Sankriytayana translation.","san87":"Paragraph numbers in Sander, 1987.","san89":"Paragraph numbers in Sander, 1987.","sb":"Paragraph numbers in Fritz Schaefer / Raimund Beyerlein.","sc":"Sutta Central paragraph number.","sen82":"Section and paragraph numbers in Senart, 1882.","sht":"References for SHT fragments.","snp-vagga-section-verse":"Chapter, section, and verse number within the section.","snp-vagga-verse":"Chapter, and verse number within the chapter.","t":"Volume, page, column, and line number in the Taish canon.","titus":"","t-linehead":"Volume, page, column, and line number in the Taish canon.","ud-sutta":"Sutta number.","ud-vagga-sutta":"Chapter/sutta number.","tri62":"Stra and paragraph number in Triph, 1962.","tri95":"Section and paragraph number in Triph, 1995.","tu":"","uv":"Chapter and verse numbers for the Udnavarga.","vai58":"Page numbers in Vaidya, 1958.","vai59":"Page and line numbers in Vaidya, 1959.","vai61":"Page and line numbers in Vaidya, 1961.","verse-num-pts":"Verse number in the Pali Text Society edition.","vimula":"","vn":"Vietnamese translation paragraph number.","wal48":"Paragraph numbers for sondertext in Waldschmidt, 1948 (ST.ii).","wal50":"Paragraph numbers in Waldschmidt, 1950 (etc.).","wal52":"Paragraph numbers in Waldschmidt, 1952, 1956, 1960.","wal55b":"Paragraph numbers in Waldschmidt, 1955b, Die Einleitung des Sagtistra.","wal57c":"Paragraph numbers in Waldschmidt, 1957c, Das Upasenastra.","wal58":"Paragraph numbers in Waldschmidt, 1958.","wal59a":"Paragraph numbers in Waldschmidt, 1959a, Kleine Brahmi-Schriftrolle.","wal60":"Paragraph numbers in Waldschmidt, 1960/1.","wal61":"Paragraph numbers for sondertext in Waldschmidt, 1961 (ST.i).","wal68a":"Paragraph numbers in Waldschmidt, 1958a, Drei Fragmente buddhistischer Stras aus den Turfanhandschriften.","wal70a":"Paragraph numbers in Waldschmidt, 1970a, Buddha frees the disc of the moon.","wal70b":"Paragraph numbers in Waldschmidt, 1970b, Fragment of a Buddhist Sanskrit text on cosmogony.","wal76":"Paragraph numbers in Waldschmidt, 1976.","wal78":"Paragraph numbers in Waldschmidt, 1978.","wal80c":"Paragraph numbers in Waldschmidt, 1980c, On a Sanskrit version of the Verahaccni Sutta.","wg":"Paragraph numbers in Wilhelm Geiger.","wp":"Wisdom Publications paragraph number.","yam72":"Paragraph numbers in Yamada, 1972."},popup:{"pub":"","var":"","rdg":"","cross":"","end":""},content:{"add":"Text added by the editor or translator for clarification.","altAcronym":"PTS 1998 (Somaratne) edition of SN Vol I.","altVolPage":"Alternative PTS or Taisho numbering.","corr":"Reading corrected by the editor.","dp":"Verse numbers for Dhammapada.","gap":"Gap in the manuscript.","gloss":"Definition of term.","jataka":"An embedded Jtaka story.","precision":"Estimated precision of this location (1 = known, 6 = unknowable)","pe":"Instructions for expanding text supplied by the editor or translator.","expanded":"Text expanded by editor or translator although elided in original.","sic":"Apparently incorrect reading determined by the editor.","skt-mg-bu-pm":"Rule numbers in the Sanskrit Mahsaghika Bhikhhu Ptimokkha.","supplied":"Text hypothetically reconstructed by the editor or translator.","suppliedmetre":"Metre reconstructed by the editor.","surplus":"Surplus text.","sutta-parallel":"Passage also found in the Sutta Pitaka.","term":"Defined term.","unclear":"Unclear reading."}}
sc.classes.marginSelector=_.map(_.keys(sc.classes.margin),function(e){return'.'+e}).join(',')
sc.volPrefixMap={'da':'i','ma':'i','ea':'ii','ea-2':'ii','sa':'ii','sa-2':'ii','sa-3':'ii','zh-mg':'xxii','zh-mi':'xxii','zh-dg':'xxii','zh-mi':'xxii','zh-sv':'xxiii','zh-ka':'xxiv','t':[[0,98,'i'],[102,151,'ii'],[152,154,'iii'],[197,212,'iv'],[499,515,'xiv'],[605,605,'xv'],[713,715,'xvi'],[741,802,'xvii'],[1245,1362,'xxi'],[1421,1428,'xxii'],[1435,1444,'xxii'],[1448,1451,'xxiv'],[1507,1509,'xxv'],[1521,1537,'xxvi'],[1545,1545,'xxvii'],[1548,1548,'xxviii']]}
sc.mode={}
sc.data={}
sc.jsBaseUrl=$('script[src*="js/"]').last().attr('src').match(/((.*\/|^)js\/)/)[0];function onMainLoad(){sc.mode={}
var images=$("img");images.unveil(50);$("details").details()
if(!$.fn.details.support){$("details").addClass('no-details').on('open.details',function(){$(this).attr('open',true);}).on('close.details',function(){$(this).attr('open',false);});}
if($('.sutta').length>0){sc.mode.pali=($('#text').attr('lang')=='pi');sc.sidebar.init();sc.init();}
var parallelCitationLabel=$('#parallel-citation .label');var parallelCitationTextField=$('#parallel-citation > input');var parallelCitationButton=$('#parallel-citation > button');if(parallelCitationButton.length){parallelCitationTextField.on('click',function(){parallelCitationTextField.select();});var clip=new ZeroClipboard(parallelCitationButton,{moviePath:"/js/vendor/ZeroClipboard-1.2.3.swf",hoverClass:"hover",activeClass:"active"});clip.on('load',function(client){parallelCitationLabel.hide();parallelCitationButton.show();client.on('complete',function(client,args){});});clip.on('dataRequested',function(client,args){var text=parallelCitationTextField.val();client.setText(text);});}}
$(document).ready(onMainLoad);function kindAdviceToIEusers(version){if(version>8)return;$("#toc").append('<div style="border: 2px solid red; font-size:11px">You appear to be using an obsolete version of Internet Explorer. Advanced site features are not supported for old browsers and will not work. Please install and use a modern browser such as Google Chrome, Firefox, Internet Explorer 9 or 10 - or install the Google Chrome Frame plugin. <small>Or you know, keep using an antique broswer, and missing out on half the internet.</small></div>');}
if(m=navigator.appVersion.match(/MSIE ([0-9]+)/))
kindAdviceToIEusers(m[1]);var transFuncs={'toRoman':[toRoman,'k'],'toSinhala':[toSinhala,''],'toThai':[toThai,''],'toMyanmar':[toMyanmar,''],'toDevar':[toDevar,''],'toSyllables':[toSyllables,'k-',"Breaks words into syllables and distinguishes between short and long syllables."]};var syllSpacer='';sc.init=function(reset)
{if(reset)scState.restore("clean");buildTextualInformation();if(sc.userPrefs.getPref("textInfo")===true){toggleTextualInfo(true);}
if(sc.mode.pali===true){var translitFunc=null;prefscript=sc.userPrefs.getPref("script");if(prefscript){sc.mode.translitFunc=transFuncs[prefscript][0];}else{sc.mode.translitFunc=transFuncs['toRoman'][0];}
for(f in transFuncs)
if(wordMap[f]==undefined)
wordMap[f]={};if(!sc.mode.translitFunc)sc.mode.translitFunc=transFuncs[0][0];if(sc.userPrefs.getPref("paliLookup")===true)
{if(sc.mode.translitFunc.name=='toSyllables')
{toSyllablesInit();}
sc.piLookup.enablePaliLookup(true);}else{transliterate(sc.mode.translitFunc);}}}
sc.userPrefs={storage:getStorage(),setRemember:function(value){value=!!value;if(value==false)this.storage.clear();this.storage["remember"]=value;},isRemember:function(){return this.storage["remember"];},setPref:function(pref,value,re_init){this.storage[pref]=value;if(re_init)sc.init(true);},getPref:function(pref){var value=this.storage[pref];if(value==='false')return false;if(value==='true')return true;if(Number(value).toString()===value)return Number(value);return value;},togglePref:function(pref){this.storage[pref]=!this.storage[pref];},clearPref:function(pref){this.storage.removeItem(pref);},clearAll:function(){this.storage.clear();}}
function getStorage(){try{if('sessionStorage'in window&&window['sessionStorage']!=null)
{return sessionStorage;}}catch(e){}
return{};}
function ohInternetExplorerLetMeCountTheWaysILoveYou(){function userFunc(){}
var count=0;if(!('name'in userFunc)){for(var f in transFuncs){transFuncs[f][0].name=f;count+=1;}}};ohInternetExplorerLetMeCountTheWaysILoveYou();sc.headerMenu={node:$('#panel-screen-wrap, #panel'),lastScreenScroll:0,toggle:function(e){$(this).toggleClass('active');$('header nav').not(this).removeClass('active')},update:function(element,mode){var self=sc.headerMenu,target=$(element.find('[href]').attr('href'));if(mode===undefined&&target.hasClass('active')){mode="hide";}else{mode="show";}
if(mode=="hide"){self.hideAll();}
else{self.hideAll();self.node.addClass('active')
target.addClass('active');element.addClass('active');setTimeout(self.adjustColumns,50);}},hideAll:function(e){$('#panel  .active, header  .active').removeClass('active');$('#panel-screen-wrap, #panel').removeClass('active');},adjustColumns:function(){var contents=$('.contents.active'),contentsWidth=contents.width(),ruler=$('<span>m</span>').appendTo(contents.find('.column li:last')),t=contents.find('.column:first'),extraWidth=t.outerWidth(true)-t.width(),minWidth=ruler.innerWidth()*12.5+extraWidth,columnWidth=Math.max(minWidth,contentsWidth/5.25)+extraWidth,actualColumnCount=contents.find('.column').length;ruler.remove();fitColumnCount=Math.floor(contentsWidth/columnWidth);columnWidth=contentsWidth/fitColumnCount-10;$('#panel').find('.column').css({'width':columnWidth,'min-width':minWidth});var maxHeight=$(window).height()*0.9-$('header').height(),maxColumnHeight=Math.max.apply(null,contents.find('.column').map(function(){return $(this).offset().top+$(this).outerHeight(true)}))
panelHeight=Math.min(maxColumnHeight+5,maxHeight)
$('#panel').css({'height':panelHeight})},scrollEvents:[],scrollShowHide:function(e){var self=sc.headerMenu,scrollTop=$(document.body).scrollTop(),scrollAmount=scrollTop-self.lastScreenScroll;self.lastScreenScroll=scrollTop;if(scrollAmount>0){$('header').addClass('retracted');self.hideAll();return}
if(scrollTop==0){$('header').removeClass('retracted');return}
var now=e.timeStamp;if(scrollAmount<0){for(i=self.scrollEvents.length-1;i>=0;i--){oldE=self.scrollEvents[i];var diff=now-oldE[1];if(diff>500){self.scrollEvents.pop()}else if(diff>100&&oldE[0]<0){$('header').removeClass('retracted');return}}}
self.scrollEvents.push([scrollAmount,e.timeStamp]);}}
setTimeout(function(){$('header nav a').each(function(){$(this).attr('href','#'+$(this).attr('href').replace(/^\.*\//,'').replace('.html',''));});$('header nav').on('click',function(){sc.headerMenu.update($(this));return false});$('#panel-screen-wrap').on('click',function(e){if($(e.target).is('a'))
return true;sc.headerMenu.hideAll();return false}).on('mousewheel',function(e){if(e.target==this){sc.headerMenu.hideAll();return false;}
return true})
$(window).on('ready resize',sc.headerMenu.adjustColumns);$(window).scroll(sc.headerMenu.scrollShowHide);$('#panel').scrollLock();});if(String.prototype.trimLeft===undefined)
{String.prototype.trimLeft=function(){return this.replace(/^\s+/,"");}}
sc.formatter={init:function(){$(window).resize(function(){});$(document).on('keydown',sc.formatter.deathToTheBeast);setTimeout(this.navMenuFixer,1000);this.apply();this.operaFix();this.highlightBookmark();this.toolsMagic();setTimeout(this.acro_expander,500);$(window).resize(this.overlapperFixer);this.setReady();},apply:function(){$("tr").filter(":even").addClass("even");sc.formatter.quoteHanger();},shove:function(){var start=(new Date()).getTime();$("q").each(function(){sc.formatter.rePosition($(this))});},setReady:function(){$('main').css('visibility','visible');},operaFix:function(){if('opera'in window){if('version'in window.opera&&window.opera.version>12.2)
{return;}
$(document.body).addClass('badfonts');}},rePosition:function($element){return $element;var setLeft=false;var offset=$element.offset();var width=$element.innerWidth();if(offset.left<1){offset.left=1;$element.offset(offset).innerWidth(width+1);setLeft=true;}
if(offset.left+width>$(document).width())
{offset.left=$(document).width()-(width+2);$element.offset(offset).innerWidth(width+1);}
return $element;},getRuler:function(){if(!this.ruler){this.ruler=$('<p style="position:fixed; margin-left: -1000px">').appendTo('#text article')}
return this.ruler;},measureQueue:[],queueMeasure:function(toMeasure,callback,ruler){var self=this,ruler=ruler||this.getRuler(),args=[];_.each(toMeasure,function(content){var e=$('<span style="position: absolute; visibility: hidden">');e.append(content);ruler.prepend(e);args.push([content,e]);});self.measureQueue.push([args,callback]);},doMeasure:function(){var deferred=[];this.measureQueue.forEach(function(t){var args=t[0],callback=t[1],measurements=[];args.forEach(function(arg){measurements[arg[0]]=arg[1].innerWidth();});deferred.push([callback,measurements])});deferred.forEach(function(t){var callback=t[0],measurements=t[1];callback(measurements);});this.measureQueue=[];this.measureNum=null;this.quoteHangerEnd=new Date().getTime();},quoteHanger:function(){var self=this;this.quoteHangerStart=new Date().getTime();$('p').each(function(){var p=$(this),text=p.text(),m=text.match(/^[ \n0-9.-]*([]+)(.)/);if(m){var snip=m[2],quoted=m[1]+m[2];self.queueMeasure([quoted,snip],function(result){var diff=result[quoted]-result[snip];p.css('text-indent',-diff+'px');},p);}});self.doMeasure();},markOfTheBeast:0,deathToTheBeast:function(event){if(event.which==77&&event.ctrlKey==true)
{if(!(window.scState&&window.Iter))return;textualControls.disable()
var iter=new Iter(document.body,'text');var startTime=Date.now();while(node=iter.next())
{if(node.nodeValue)
{if(sc.formatter.markOfTheBeast%2==0){node.nodeValue=node.nodeValue.replace(//g,'').replace(//g,'');}else{node.nodeValue=node.nodeValue.replace(//g,'').replace(//g,'');}}}
textualControls.enable();if(sc.formatter.markOfTheBeast%2==0){}else{var num=1+Math.ceil(sc.formatter.markOfTheBeast/2);var suffix='th';if(num%10==1&&num%100!=11)suffix='st';if(num%10==2&&num%100!=12)suffix='nd';if(num%10==3&&num%100!=13)suffix='rd';}
sc.formatter.markOfTheBeast+=1}},highlightBookmark:function(){var toHighlight=[window.location.hash],i=0;while(i<toHighlight.length)
{e=$(toHighlight[i].replace(/\./g,'\\.'));if(e.length>0){e.addClass('bookmarkeded');alsoIds=e.attr('data-also-ids');if(alsoIds){ids=alsoIds.split(/,\s*/g);for(j in ids){toHighlight.push('#'+ids[j]);}}}
i++;if(i>100)return;}},toolsMagic:function(){if($('.tools').length==0){return}
$('[data-allowed]').on('change',function(e){var filename=this.value,types=$(this).attr('data-allowed').split(' ,'),m=filename.match('.+[.](.+)');if(m&&types.indexOf(m[1].toLowerCase())!=-1){return}
this.value=null;if(!m){alert('Unknown filetype, only {} allowed'.format(types.join(', ')));}
else{alert('Filename extension .{} not allowed, only .{} allowed'.format(m[1].toLowerCase(),types.join(', .')));}});tidy={tidy:$('[value=html5tidy]'),level:$('[name=tidy-level]'),extra:$('#tidy-extra input'),flags:$('[name=tidy-flags]'),updateFlags:function(e){var self=tidy,flags=[];if(self.tidy[0].checked){$('#tidy ul input, #tidy textarea').removeAttr('disabled');}else{$('#tidy ul input, #tidy textarea').attr('disabled','disabled');}
flags.push(self.tidy.attr('data-flags'));for(var i=0;i<self.level.length;i++){flags.push($(self.level[i]).attr('data-flags'));if(self.level[i].checked)
break;}
for(var i=0;i<self.extra.length;i++){if(self.extra[i].checked)
flags.push($(self.extra[i]).attr('data-flags'));};self.flags.val(flags.join(' ').replace(/  +/g,' ').trim())},init:function(){var self=this;$('#tidy input, [name=cleanup]').on('change',self.updateFlags);self.updateFlags();}}
decruft={decruft:$('[name=decruft]'),what:$('[name^=decruft-]'),discard:$('[name=decruft-discard]'),unwrap:$('[name=decruft-unwrap]'),update:function(e){var self=decruft,selectors=[];for(var i=0;i<self.what.length;i++){if(self.what[i].checked){selectors.push(self.what[i].value);}}
self.discard.val(selectors.join(', '))},init:function(){this.update();this.what.on('change',this.update);}}
$('[name=tidy-file]').on('change',function(e){var self=e.target;if(e.target.value.search(/\.zip$/i)==-1){self.value=null;alert('Only zip files are acceptable.','Go away');}});function updateBoundStatus(target){var boundElements=$($(target).attr('data-bound'));if(target.checked){boundElements.removeAttr('disabled')}
else{boundElements.attr('disabled','disabled')}}
$('[data-bound]').on('change',function(e){updateBoundStatus(this)});$(document).on('ready',function(){$('[data-bound]').each(function(){updateBoundStatus(this)});});$('[name=show]').on('change',function(e){$('.entry').show();if(e.target.value!='all')
$('.entry').not(e.target.value).hide();});if($('#tidy').length)
tidy.init();if($('#decruft').length)
decruft.init();},alignToParentMenu:function(ul){var parent=ul.parent()},navMenuFixer:function(){var bodyWidth=$(document.body).width(),self=sc.formatter;function checkOkay(ul){var ul=$(this);var width=ul.width(),offset=ul.offset(),leftExtent=offset.left+width;if(leftExtent>bodyWidth){var parent=ul.parent(),newLeftOffset=parent.offset().left-width;if(newLeftOffset<0){newLeftOffset=bodyWidth-width-4;}
ul.offset({left:newLeftOffset});}
ul.children().children('ul').each(checkOkay);}
$('#page-header-menu > nav > ul').each(checkOkay);if(self.navMenuFixer.first==undefined){$(window).resize(function(){$('#page-header-menu ul').removeAttr('style');self.navMenuFixer();});self.navMenuFixer.first=true;}}}
sc.formatter.init();sc.notes={rowRex:/ \| /,varRex:/^(\(.*?\)|[^\(]+)(.*)/,edsRex:self.edsRex,robrContentsRex:/\((.*?)\)([^\)]*)/g,xrefRex:/\^([\w.\-]+(?:#\w+)?)\s*(?:\[(.*?)\])?(.*)/g,sourceAttr:'title',init:function(){$('#text').on('mouseover','.var, .cross',sc.notes.markupNote);},markupNote:function(event){"use strict";var self=sc.notes;if($(event.target).find('.deets').length)return;var $target=$(event.target),noteData=$target.attr(self.sourceAttr);if($target.is('.var')){$target.append(self.markupVarNote(noteData));}else if($target.is('.cross')){$target.append(self.markupXRefNote(noteData));}
$target.attr(self.sourceAttr,null);},markupVarNote:function(noteData){var self=this;return $('<table class="deets">').append(noteData.split(self.rowRex).map(function process_row(row_text){var m=row_text.match(self.varRex),variant=m[1],comment=m[2],out;if(variant&&!comment){out='<tr><td colspan=2>{}</td></tr>'.format(self.markupComment(variant));}else{out='<tr><td>{}</td><td>{}</td>'.format(variant,self.markupComment(comment));}
return $(out);}));},markupXRefNote:function(comment){var self=this,note;rows=comment.split(self.rowRex).map(function(row){var markedRow=row.replace(self.xrefRex,self.xRefToHTML);if(markedRow==row){markedRow='<td colspan=2>'+row+'</td>'}
return'<tr>'+markedRow+'</tr>';})
return'<table class="deets">'+rows.join('\n')+'</table>'
return ul;},markupComment:function(comment){var self=this;comment=comment.replace(self.robrContentsRex,function(m,contents,leftovers){if(contents){contents='<ul>'+contents.split(/,\s*/g).map(function(part){part=part.replace(self.edsRex,function(ed){var res=self.editionsExpansionData[ed];if(!res){ed}
return res[1];});return'<li>'+part+'</li>';}).join('\n')+'</ul>';}
return contents+leftovers;});return comment},xRefToHTML:function(m,urlComp,title,desc){var parts=urlComp.split('#'),uid=parts[0],bm=(parts.length>1)?parts[1]:null,href='./'+uid+(bm?'#'+bm:''),acro=sc.util.uidToAcro(uid);if(desc){title=desc.replace(/^[\d.\u2060]*\s*/,'');}
return'<td><a class="xref" href="{}">{}</a></td><td>{}</td>'.format(href,acro,title)},editionsExpansionData:{'c-a':["C-A","Chahasagti Piaka Atthakath"],'c1':["C1","Chahasagti Piaka 24962499 (19521955)"],'c2':["C2","Chahasagti Piaka 2nd ed. 25002506 (19561962)"],'c3':["C3","Chahasagti Piaka (1997)"],'mr':["Mr","Maramma Tipiaka 2541 (1997)"],'si':["Si","Sinhala Tipiaka 2501 (1957)"],'km':["Km","Phratraipiakapi 25012512 (19581969)"],'maku':[" Maku","Mahmakurjvidylai 2466 (1923)"],'pts-a':["PTS-A","Pali Text Society Atthakath"],'pts1':["PTS 1","Pali Text Society 1st ed. 24242535 (18811992)"],'pts2':["PTS 2","Pali Text Society 2nd ed. 25172541 (19741998)"],'s-a':["S-A","Symarahassa Tepiaka Atthakath"],'s1':["S 1","Chulachomklao Pi Tipiaka 2436 (1893)"],'s2':["S 2","Symarahassa Tepiaka 24692471 (19261928)"],'s3':["S 3","Symarahassa Tepiaka 2538 (1995)"],'bj':["Bj","Buddhajayanttripiakagranthaml 25012531 (19571989)"],'bj-a':[" Bj A","Buddhajayanttripiakagranthaml Atthakath)"]},}
sc.notes.edsRex=(function(){var edUids=[];for(uid in sc.notes.editionsExpansionData){edUids.push(uid);}
edUids.sort(function(e){return e.length});return RegExp('\\b({})\\b'.format(edUids.join('|')),'g');})()
$(document).ready(sc.notes.init);sc=sc||{};sc.lzh2enLookup={buttonId:"lzh2en",chineseClasses:"P, H1, H2, H3",active:false,dictRequested:false,chineseIdeographs:/[\u4E00-\u9FCC]/g,chinesePunctuation:/[]/g,loading:false,queue:[],markupTarget:null,originalHTML:null,mouseIn:0,currentLookup:null,lastCurrentLookup:null,init:function(button,markup_target){this.markupTarget=$(markup_target).addClass('lzh2enLookup')[0];this.button=$(button).on('click',sc.lzh2enLookup.toggle);if(sc.sessionState.getItem('lzh2en.active')){this.activate();}},before:function(){self=sc.lzh2enLookup;sc.sidebar.messageBox.clear();var message='<p>Loading Chinese to English dictionary data, this may take some time (~1MB)</p>'
sc.sidebar.messageBox.show(message,{id:'lzh_msg_loading'});},done:function(){var self=sc.lzh2enLookup;sc.sidebar.messageBox.remove('lzh_msg_loading');var message='<p>Chinese to English lookup activated.</p>\
            <p>Use the mouse or left, right arrow keys to navigate the text (shift-right to advance more).</p>\
            <p>A red border indicates modern usage, possibly unrelated to early Buddhist usage.</p>'
sc.sidebar.messageBox.show(message);self.currentLookup=$('span.lookup:first')[0];self.lastCurrentLookup=self.currentLookup;},fail:function(jqXHR,textStatus,errorThrown){sc.sidebar.messageBox.remove('lzh_msg_loading');var msg='<div>Failed to download dictionary data because of <em>{}</em></div>'.format(textStatus);sc.sidebar.messageBox.show(msg,{timeout:10000});},activate:function(){var self=this;if(!this.originalHTML)
this.originalHTML=this.markupTarget.innerHTML;if(!this.dictRequested&&!window.sc.lzh2enData)
{self.before();this.dictRequested=true;sc.lzh2enDataScripts.forEach(function(url,i){var jqXHR=jQuery.ajax({url:sc.jsBaseUrl+url,dataType:"script",crossDomain:true,cache:true,timeout:180*1000});if(i==0){jqXHR.done(self.done);jqXHR.fail(self.fail);}});}
this.generateMarkup();$(document).on('mouseenter','span.lookup',function(){self.mouseIn++;})
$(document).on('mouseleave','span.lookup',function(){self.mouseIn--;})
$(document).on('keyup','',function(e){if(!self.mouseIn)
return
if(e.keyCode==39||e.keyCode==37)
e.preventDefault();if(e.keyCode==39){var from=self.currentLookup;if(self.lastCurrentLookup&&e.shiftKey)
from=self.lastCurrentLookup;var next=nextInOrder(from,'span.lookup:not(.punctuation)');if(!next)
return
self.setCurrent(next)}else if(e.keyCode==37){var prev=previousInOrder(self.currentLookup,'span.lookup:not(.punctuation)');if(!prev)
return
self.setCurrent(prev);}});sc.sessionState.setItem('lzh2en.active',true);},deactivate:function(){this.markupTarget.innerHTML=this.originalHTML;sc.sidebar.messageBox.clear();sc.sidebar.messageBox.show('<p>Lookup disabled.</p>',{'timeout':5000});sc.sessionState.setItem('lzh2en.active',false);},generateMarkup:function(){if(this.button)
this.button.attr('disabled','disabled');this.markupGenerator.start();$(document).on('mouseenter','span.lookup',sc.lzh2enLookup.lookupHandler);},markupGenerator:{start:function(){this.node=sc.lzh2enLookup.markupTarget;this.startTime=Date.now();this.step();},step:function(){for(var i=0;i<10;i++){if(this.node===undefined){this.andfinally();return;}
var nextNode=nextInOrderByType(this.node,document.TEXT_NODE)
this.textNodeToMarkup(this.node);this.node=nextNode;}
setTimeout('sc.lzh2enLookup.markupGenerator.step.call(sc.lzh2enLookup.markupGenerator)',5);},andfinally:function(){self=sc.lzh2enLookup;if(self.button)
self.button.removeAttr('disabled');},textNodeToMarkup:function(node){if(node===undefined)return;var text=node.nodeValue;if(!text||text.search(sc.lzh2enLookup.chineseIdeographs)==-1){return}
var proxy=document.createElement("span");node.parentNode.replaceChild(proxy,node);proxy.outerHTML=this.toLookupMarkup(text);},toLookupMarkup:function(input)
{var self=sc.lzh2enLookup,chinesePunctuation=self.chinesePunctuation;return input.replace(self.chineseIdeographs,function(ideograph){var eclass='lookup';if(ideograph.match(chinesePunctuation))
eclass+=' punctuation';return'<span class="'+eclass+'">'+ideograph+'</span>'});}},toggle:function(){self=sc.lzh2enLookup;self.active=!self.active;if(self.active)self.activate()
else self.deactivate();},setCurrent:function(node){var self=this,graphs='',nodes=$(),iter=new Iter(node),i
$('.popup').remove()
$('.current_lookup').removeClass('current_lookup fallback')
this.currentLookup=node
while(graphs.length<10){if($(node).is('span.lookup')){graphs+=$(node).text();nodes.push(node)}
node=nextInOrder(node,document.ELEMENT_NODE)
if(!node){break}}
if(!graphs)
return
var popup=['<div class="popup"><table>'],first=true,fallback=false;for(i=graphs.length;i>0;i--){var snip=graphs.slice(0,i)
if(snip in sc.lzh2enData){popup.push(self.lookupWord(snip))
if(first){first=false;nodes.slice(0,i).addClass('current_lookup')
this.lastCurrentLookup=nodes[i-1];}}else if(i==1&&snip in sc.lzh2enFallbackData){popup.push(self.lookupWord(snip))
popup[0]='<table class="popup fallback">'
fallback=true
if(first){first=false;nodes.slice(0,i).addClass('current_lookup fallback')
this.lastCurrentLookup=nodes[i-1];}}}
if(this.lastCurrentLookup==null)
this.lastCurrentLookup=this.currentLookup;if(first)
return
popup.push('</table></div>')
popup=self.popup(nodes[0],popup.join('\n'))},lookupHandler:function(e){sc.lzh2enLookup.setCurrent(e.target);},lookupWord:function(graph){var out="";graph=graph.replace(/\u2060/,'');if(sc.lzh2enData[graph])
{var href="http://www.buddhism-dict.net/cgi-bin/xpr-ddb.pl?q="+encodeURI(graph);return('<tr><td class="ideograph"><a href="'+href+'">'+graph+'</a></td> <td class="meaning"> '+sc.lzh2enData[graph][0]+': '+sc.lzh2enData[graph][1]+'</td></tr>');}else if(sc.lzh2enFallbackData[graph]){return('<tr class="fallback"><td class="ideograph"><a>'+graph+'</a></td> <td class="meaning"> '+sc.lzh2enFallbackData[graph][0]+': '+sc.lzh2enFallbackData[graph][1]+'</td></tr>')}
return"";},popup:function(parent,popup){var offset,docWith,dupe,docWidth,isAbsolute=false
if('left'in parent||'top'in parent){offset=parent
offset.left=offset.left||0
offset.top=offset.top||0
parent=document.body
isAbsolute=true}else{parent=$(parent)
offset=parent.offset()}
popup=$(popup)
docWidth=$(document).width()
dupe=$(popup).clone()
$(this.markupTarget).append(dupe)
var popupWidth=dupe.innerWidth(),popupHeight=dupe.innerHeight();dupe.remove()
if(!isAbsolute){offset.top+=parent.innerHeight()-popupHeight-parent.outerHeight();offset.left-=popupWidth/2;}
if(offset.left<1){offset.left=1;popup.innerWidth(popupWidth+5);}
if(offset.left+popupWidth+5>docWidth)
{offset.left=docWidth-(popupWidth+5);}
popup.offset(offset)
$(this.markupTarget).append(popup)
popup.offset(offset)
popup.mouseleave(function(e){$(this).remove()});return popup;}}
sc.text_image={isInit:false,init:function(){if(this.isInit)return
this.isInit=true;if($('#text').length==0){return}
var volpage_links=$(sc.classes.marginSelector);var uid=$('section.sutta').attr('id'),ids=volpage_links.map(function(){return $(this).attr('id')}).toArray().join(',');$.ajax('/data?'+$.param({text_images:1,uid:uid,volpage_ids:ids})).success(sc.text_image.processData);},processData:function(data,status,jqXHR){console.log(data);_.each(data.text_images,function(url,id,_data){var e=$(document.getElementById(id)),link=$('<span/>');e.attr({'data-src':url,'title':'View Page Image'}).addClass('text-info-button').on('click',sc.text_image.showImage);});},showImage:function(e){var $target=$(e.currentTarget),src=$target.attr('data-src'),overlay,fadeTime=200;e.preventDefault(true);overlay=$('<div id="text-image-overlay"/>').append($('<div id="text-image"/>').append($('<img/>').attr('src',src)));$('main').append(overlay);overlay.hide().fadeIn(fadeTime);var originalWindowScroll=$(window).scrollTop();function removeOverlay(){overlay.fadeOut(fadeTime,function(){overlay.remove();});}
overlay.on('click',function(e){if(e.target==overlay[0]){removeOverlay();}});$(window).on('scroll.sc-text-image',function(e){if((Math.abs($(window).scrollTop()-originalWindowScroll))>150){removeOverlay()
$(window).off('scroll.sc-text-image');}});return true;}}
if(sc.userPrefs.getPref("textInfo")===true){sc.text_image.init();}
sc.discourse={forumUrl:'http://discourse.suttacentral.net',resultsDiv:$('#discourse-search-results'),button:$('#discourse-link-button'),init:function(){var self=sc.discourse;self.visible=self.resultsDiv.css('display')!='none';self.button.on('click',function(e){e.preventDefault();self.visible=!self.visible;if(self.visible){self.show();}else{self.hide();}
return false})
self.fetchCategoryData(self.search);},show:function(){self.resultsDiv.slideDown();$('#discourse-search-results ~ *').slideUp()},hide:function(){self.resultsDiv.slideUp()
$('#discourse-search-results ~ *').slideDown()},search:function(){self=sc.discourse;if(self.jqXHR)return
self.jqXHR=$.ajax(self.forumUrl+'/search/query.json',{data:{term:'"{}"|{}'.format(sc.text.acro,sc.text.uid),include_blurbs:true}}).success(self.updateResults).error(function(){self.button.off('click')});},updateResults:function(data){var self=sc.discourse,ul=$('<ul class="results"/>');$('#discourse-search-loading').remove();self.resultsDiv.append(ul);self.data=data;_.zip(data.topics,data.posts).forEach(function(pair){var topic=pair[0],post=pair[1],url='http://discourse.suttacentral.net/t/{}/{}/{}'.format(topic.slug,topic.id,post.post_number),catIcon=self.makeCategoryIcon(topic.category_id),code='<li><a href="{}" target="_blank">{}<span class="topic-title">{}</span><span class="post-blurb">{}</span></a></li>'.format(url,catIcon,topic.fancy_title,post.blurb);ul.append(code)})},fetchCategoryData:function(callback){self=sc.discourse;var storedData=null,expires=7*86400*1000;if(storedData){if(Date.now()-storedData.time>expires){storedData=null;}}
if(!storedData){$.ajax(self.forumUrl+'/categories.json').success(function(data){console.log(data);self.categoryData=self.massageCategoryData(data);localStorage.setItem('sc.discourse.categoryData',{time:Date.now(),data:self.categoryData})
callback();})}else{self.categoryData=storedData.data;callback();}},massageCategoryData:function(data){var properties=['id','color','text_color','description_text','name','subcategory_ids']
var pickedData=_.map(data.category_list.categories,function(obj){return _.pick(obj,properties)})
var out={}
_.each(pickedData,function(obj){out[obj.id]=obj;_.each(obj.subcategory_ids,function(id){console.log('Setting {} to {}'.format(id,obj.id))
out[id]=obj;});});return out},makeCategoryIcon:function(categoryId){var self=this,data=self.categoryData[categoryId];if(!data)return categoryId;var icon=$('<span/>').text(data.name).addClass('topic-category-icon').attr('title',data.description_text);$('<span class="topic-category-icon-bar"></span>').css('background-color','#'+data.color).prependTo(icon);return $('<span/>').append(icon).html();}}
if(document.getElementById('text')){$(document).ready(sc.discourse.init)}
sc=sc||{};sc.fonts={makeFontName:function(e){return'{},{},{}'.format(e.css('font-family').split(',')[0],e.css('font-weight'),e.css('font-style'))},analyzeFontsRecursive:function(element,result){if(result===undefined)result={};var fontName=this.makeFontName($(element)),chars=[];$(element).contents().each(function(){if(this.nodeType===3){chars=_.union(chars,this.nodeValue.split(''));}else if(this.nodeType===1){sc.fonts.analyzeFontsRecursive(this,result);}});result[fontName]=_.union(result[fontName]||[],chars)
return result},massageResults:function(results){for(fontName in results){results[fontName].sort();results[fontName]=results[fontName].join('');}
return results},diffResults:function(a,b){out={}
for(key in a){var diff=_.difference(a[key]||[],b[key]||[]);if(diff.length){out[key]=diff}}
return out},getHtmlDump:function(results){this.massageResults(results)
out='<table style="margin:0; padding: 0">'
_.sortBy(_.pairs(results),function(t){return 1/(1+t[1].length);}).forEach(function(t,i){var style='font-name: {0[0]}; font-weight: {0[1]}; font-style: {0[2]}'.format(t[0].split(','));out+='<tr style="font-family: {0}"><td style="white-space: nowrap">{0}</td><td style="{2}">{1}</td></tr>'.format(t[0].replace(/,/g,'<br>'),t[1],style);});return out}}
$(document).on('ready',function(){if(window.location.href.indexOf('?fonts')!=-1){var results=sc.fonts.analyzeFontsRecursive(document.body);if($('#intro').length){localStorage.setItem('sc.fonts.results.home',JSON.stringify(results));}
if(window.location.href.indexOf('fonts=diff')!=-1){results=sc.fonts.diffResults(results,JSON.parse(localStorage.getItem('sc.fonts.results.home')))
console.log(results);}
var html=sc.fonts.getHtmlDump(results);var e=$('<div id="fonts-dump"/>').css({position:"fixed",right:0,'z-index':50,bottom:0,top:'42px',width:"50em",background:"white",border:"1px solid black",'font-family':"mono",'font-size':"80%",'word-break':'break-all','overflow-x':'visible','overflow-y':'auto'});e.html(html).appendTo(document.body);}});sc.lzh2enDataScripts=['data/lzh2en-maindata-c9a09db41c.min.js','data/lzh2en-fallback-2dbb476819.min.js'];sc.trackEvent=function(params){if(typeof(params)=='string'){params={category:'button',action:'click',label:params}}
if('ga'in window){ga('send',{hitType:'event',eventCategory:params.category,eventAction:params.action,eventLabel:params.label,eventValue:params.value})}else{console.log('Event: Category="{}", Action="{}", Label="{}", Value="{}"'.format(params.category,params.action,params.label,params.value||0));}}
$('main').on('click contextmenu','.file',function(){sc.trackEvent({category:'download',action:'click',label:$(this).attr('href')});})
$('#controls-tab').on('click','.button',function(e){var value=$(e.target).attr('id')||$(e.target).text();if($(this).is('select')){value+='-'+this.value;}
sc.trackEvent(value)});